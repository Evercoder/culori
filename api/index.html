<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>
			 API Reference &middot; culori 
		</title>

		<link rel="icon" type="image/png" href='/favicon.png' />
		<link rel="stylesheet" href='/css/main.css' />
	</head>
	<body>
		<header>
			<div class="container">
				<div class="logo">
					<a href='/'>
						<img
							width="132"
							height="30"
							src='/img/culori.svg'
							alt="culori"
						/>
					</a>
					<a href="https://github.com/evercoder/culori/releases">v4.0.2</a>
				</div>
				<nav>
					<ul class='nav'>
						<li >
							<a href="/getting-started/">Get started</a>
						</li>
						<li class="active">
							<a href="/api/">API reference</a>
						</li>
						<li >
							<a href="/color-spaces/">Color spaces</a>
						</li>
						<li >
							<a href="/guides/">Guides</a>
						</li>
						<li>
							<a href="https://github.com/Evercoder/culori"
								>GitHub <span aria-hidden="true">↗</span></a
							>
						</li>
					</ul>
				</nav>
			</div>
		</header>

		<div class="container">
			<article>
				<h1>API Reference</h1>
				<details>
<summary>API table of contents</summary>
<ul class='api-toc'>
<li><a href='#color-spaces'>a98</a></li>
<li><a href='#average'>average</a></li>
<li><a href='#averageAngle'>averageAngle</a></li>
<li><a href='#averageNumber'>averageNumber</a></li>
<li><a href='#blend'>blend</a></li>
<li><a href='#blerp'>blerp</a></li>
<li><a href='#clampChroma'>clampChroma</a></li>
<li><a href='#clampRgb'>clampRgb</a></li>
<li><a href='#colorsNamed'>colorsNamed</a></li>
<li><a href='#converter'>converter</a></li>
<li><a href='#color-spaces'>cubehelix</a></li>
<li><a href='#differenceCie76'>differenceCie76</a></li>
<li><a href='#differenceCie94'>differenceCie94</a></li>
<li><a href='#differenceCiede2000'>differenceCiede2000</a></li>
<li><a href='#differenceCmc'>differenceCmc</a></li>
<li><a href='#differenceEuclidean'>differenceEuclidean</a></li>
<li><a href='#differenceHueChroma'>differenceHueChroma</a></li>
<li><a href='#differenceHueNaive'>differenceHueNaive</a></li>
<li><a href='#differenceHueSaturation'>differenceHueSaturation</a></li>
<li><a href='#differenceHyab'>differenceHyab</a></li>
<li><a href='#differenceKotsarenkoRamos'>differenceKotsarenkoRamos</a></li>
<li><a href='#differenceItp'>differenceItp</a></li>
<li><a href='#displayable'>displayable</a></li>
<li><a href='#color-spaces'>dlab</a></li>
<li><a href='#color-spaces'>dlch</a></li>
<li><a href='#easingGamma'>easingGamma</a></li>
<li><a href='#easingInOutSine'>easingInOutSine</a></li>
<li><a href='#easingMidpoint'>easingMidpoint</a></li>
<li><a href='#easingSmootherstep'>easingSmootherstep</a></li>
<li><a href='#easingSmoothstep'>easingSmoothstep</a></li>
<li><a href='#easingSmoothstepInverse'>easingSmoothstepInverse</a></li>
<li><a href='#filterBrightness'>filterBrightness</a></li>
<li><a href='#filterContrast'>filterContrast</a></li>
<li><a href='#filterDeficiencyDeuter'>filterDeficiencyDeuter</a></li>
<li><a href='#filterDeficiencyProt'>filterDeficiencyProt</a></li>
<li><a href='#filterDeficiencyTrit'>filterDeficiencyTrit</a></li>
<li><a href='#filterGrayscale'>filterGrayscale</a></li>
<li><a href='#filterHueRotate'>filterHueRotate</a></li>
<li><a href='#filterInvert'>filterInvert</a></li>
<li><a href='#filterSaturate'>filterSaturate</a></li>
<li><a href='#filterSepia'>filterSepia</a></li>
<li><a href='#fixupAlpha'>fixupAlpha</a></li>
<li><a href='#fixupHueDecreasing'>fixupHueDecreasing</a></li>
<li><a href='#fixupHueIncreasing'>fixupHueIncreasing</a></li>
<li><a href='#fixupHueLonger'>fixupHueLonger</a></li>
<li><a href='#fixupHueShorter'>fixupHueShorter</a></li>
<li><a href='#formatCss'>formatCss</a></li>
<li><a href='#formatHex'>formatHex</a></li>
<li><a href='#formatHex8'>formatHex8</a></li>
<li><a href='#formatHsl'>formatHsl</a></li>
<li><a href='#formatRgb'>formatRgb</a></li>
<li><a href='#getMode'>getMode</a></li>
<li><a href='#color-spaces'>hsi</a></li>
<li><a href='#color-spaces'>hsl</a></li>
<li><a href='#color-spaces'>hsv</a></li>
<li><a href='#color-spaces'>hwb</a></li>
<li><a href='#inGamut'>inGamut</a></li>
<li><a href='#interpolate'>interpolate</a></li>
<li><a href='#interpolateWith'>interpolateWith</a></li>
<li><a href='#interpolateWithPremultipliedAlpha'>interpolateWithPremultipliedAlpha</a></li>
<li><a href='#interpolatorLinear'>interpolatorLinear</a></li>
<li><a href='#interpolatorPiecewise'>interpolatorPiecewise</a></li>
<li><a href='#interpolatorSplineBasis'>interpolatorSplineBasis</a></li>
<li><a href='#interpolatorSplineBasisClosed'>interpolatorSplineBasisClosed</a></li>
<li><a href='#interpolatorSplineMonotone'>interpolatorSplineMonotone</a></li>
<li><a href='#interpolatorSplineMonotone2'>interpolatorSplineMonotone2</a></li>
<li><a href='#interpolatorSplineMonotoneClosed'>interpolatorSplineMonotoneClosed</a></li>
<li><a href='#interpolatorSplineNatural'>interpolatorSplineNatural</a></li>
<li><a href='#interpolatorSplineNaturalClosed'>interpolatorSplineNaturalClosed</a></li>
<li><a href='#color-spaces'>itp</a></li>
<li><a href='#color-spaces'>jab</a></li>
<li><a href='#color-spaces'>jch</a></li>
<li><a href='#color-spaces'>lab65</a></li>
<li><a href='#color-spaces'>lab</a></li>
<li><a href='#color-spaces'>lch65</a></li>
<li><a href='#color-spaces'>lch</a></li>
<li><a href='#color-spaces'>lchuv</a></li>
<li><a href='#lerp'>lerp</a></li>
<li><a href='#color-spaces'>lrgb</a></li>
<li><a href='#color-spaces'>luv</a></li>
<li><a href='#mapAlphaDivide'>mapAlphaDivide</a></li>
<li><a href='#mapAlphaMultiply'>mapAlphaMultiply</a></li>
<li><a href='#mapTransferGamma'>mapTransferGamma</a></li>
<li><a href='#mapTransferLinear'>mapTransferLinear</a></li>
<li><a href='#mapper'>mapper</a></li>
<li><a href='#nearest'>nearest</a></li>
<li><a href='#color-spaces'>oklab</a></li>
<li><a href='#color-spaces'>oklch</a></li>
<li><a href='#parse'>parse</a></li>
<li><a href='#color-spaces'>p3</a></li>
<li><a href='#color-spaces'>prophoto</a></li>
<li><a href='#random'>random</a></li>
<li><a href='#color-spaces'>rec2020</a></li>
<li><a href='#color-spaces'>rgb</a></li>
<li><a href='#round'>round</a></li>
<li><a href='#samples'>samples</a></li>
<li><a href='#toGamut'>toGamut</a></li>
<li><a href='#trilerp'>trilerp</a></li>
<li><a href='#unlerp'>unlerp</a></li>
<li><a href='#useMode'>useMode</a></li>
<li><a href='#wcagContrast'>wcagContrast</a></li>
<li><a href='#wcagLuminance'>wcagLuminance</a></li>
<li><a href='#color-spaces'>xyb</a></li>
<li><a href='#color-spaces'>xyz50</a></li>
<li><a href='#color-spaces'>xyz65</a></li>
<li><a href='#color-spaces'>yiq</a></li>
</ul>
</details>
<h2>Colors are plain objects</h2>
<p>Culori does not have a <em>Color</em> class. Instead, it uses plain objects to represent colors:</p>
<pre class="language-js"><code class="language-js"><span class="token comment">/* A RGB color */</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'rgb'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">r</span><span class="token operator">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token number">0.2</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span></code></pre>
<p>The object needs to have a <code>mode</code> property that identifies the color space, and values for each channel in that particular color space (see the <a href="/color-spaces">Color Spaces</a> page for the channels and ranges expected for each color space). Optionally, the <code>alpha</code> property is used for the color's alpha channel.</p>
<h2>Parsing and conversion</h2>
<p><a id="parse" href="#parse">#</a> <strong>parse</strong>(<em>string</em>) → <em>color</em> or <em>undefined</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/parse.js">src/parse.js</a></p>
<p>Parses a string and returns the corresponding <em>color</em>. The color will be in the matching color space, e.g. RGB for hex strings, HSL for <code>hsl(…, …, …)</code> strings, et cetera. If no built-in parsers can match the string, the function will return <code>undefined</code>.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> parse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token comment">/* A named color */</span>
<span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { r: 1, g: 0, b: 0, mode: 'rgb' }</span>

<span class="token comment">/* A hex color */</span>
<span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'#ff0000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { r: 1, g: 0, b: 0, mode: 'rgb' }</span>

<span class="token comment">/* A HSL color */</span>
<span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'hsl(60 50% 10% / 100%)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { h: 60, s: 0.5, b: 0.1, alpha: 1, mode: 'hsl' }</span>

<span class="token comment">/* A Lab color */</span>
<span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'lab(100% -50 50)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { l: 100, a: -50, b: 50, mode: 'lab' }</span></code></pre>
<p>In most cases, instead of using <code>parse()</code> directly (which only operates on strings), you'll want to use a <a href="#converter"><code>converter()</code></a>, which accepts strings and color objects and returns objects in a predictable color space.</p>
<p><a id="converter" href="#converter">#</a> <strong>converter</strong>(<em>mode = &quot;rgb&quot;</em>) → <em>function (color or String)</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/converter.js">src/converter.js</a></p>
<p>Returns a <em>converter</em>: a function that can convert any color to the <em>mode</em> color space.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> converter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> rgb <span class="token operator">=</span> <span class="token function">converter</span><span class="token punctuation">(</span><span class="token string">'rgb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> lab <span class="token operator">=</span> <span class="token function">converter</span><span class="token punctuation">(</span><span class="token string">'lab'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">rgb</span><span class="token punctuation">(</span><span class="token string">'#f0f0f0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: "rgb", r: 0.49…, g: 0.49…, b: 0.49… }</span>

<span class="token function">lab</span><span class="token punctuation">(</span><span class="token string">'#f0f0f0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: "lab", l: 94.79…, a: 0, b: 0 }</span></code></pre>
<p>Converters accept either strings (which will be parsed with <code>parse()</code> under the hood) or color objects. If the <code>mode</code> key is absent from the color object passed to a converter, it's assumed to be in the converter's color space.</p>
<h2>Formatting</h2>
<p>These methods serialize colors to strings, in various formats.</p>
<p><a id="formatHex" href="#formatHex">#</a> <strong>formatHex</strong>(<em>color</em> or <em>string</em>) → <em>string</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/formatter.js">src/formatter.js</a></p>
<p>Returns the hex string for the given color. The color's <code>alpha</code> channel is omitted, and the red, green, and blue channels are clamped to the the interval <code>[0, 255]</code>, i.e. colors that are not displayable are serialized as if they'd been passed through the <code>clampRgb</code> method.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> formatHex <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">formatHex</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ "#ff0000"</span></code></pre>
<p><a id="formatHex8" href="#formatHex8">#</a> <strong>formatHex8</strong>(<em>color</em> or <em>string</em>) → <em>string</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/formatter.js">src/formatter.js</a></p>
<p>Returns the 8-character hex string for the given color. The red, green, blue, and alpha channels are clamped to the the interval <code>[0, 255]</code>, i.e. colors that are not displayable are serialized as if they'd been passed through the <code>clampRgb</code> method.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> formatHex8 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">formatHex8</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'rgb'</span><span class="token punctuation">,</span> <span class="token literal-property property">r</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ "#ff000080"</span></code></pre>
<p><a id="formatRgb" href="#formatRgb">#</a> <strong>formatRgb</strong>(<em>color</em> or <em>string</em>) → <em>string</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/formatter.js">src/formatter.js</a></p>
<p>Returns the <code>rgb(…)</code> / <code>rgba(…)</code> string for the given color. Fully opaque colors will be serialized as <code>rgb()</code>, and semi-transparent colors as <code>rgba()</code>, in accordance with the <a href="https://drafts.csswg.org/cssom/#serialize-a-css-component-value">CSSOM standard serialization</a>. Like in the case of <code>formatHex</code>, the red, green, and blue channels are clamped to the interval <code>[0, 255]</code>.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> formatRgb <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">formatRgb</span><span class="token punctuation">(</span><span class="token string">'lab(50 0 0 / 25%)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ "rgba(119, 119, 119, 0.25)"</span></code></pre>
<p><a id="formatHsl" href="#formatHsl">#</a> <strong>formatHsl</strong>(<em>color</em> or <em>string</em>) → <em>string</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/formatter.js">src/formatter.js</a></p>
<p>Returns the <code>hsl(…)</code> / <code>hsla(…)</code> string for the given color. Fully opaque colors will be serialized as <code>hsl()</code>, and semi-transparent colors as <code>hsla()</code>. All values are rounded to a precision of two digits. The Saturation and Lightness are clamped to the interval <code>[0%, 100%]</code>.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> formatHsl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">formatHsl</span><span class="token punctuation">(</span><span class="token string">'lab(50 0 0 / 25%)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ 'hsla(194.33, 0%, 46.63%, 0.25)'</span></code></pre>
<p><a id="formatCss" href="#formatCss">#</a> <strong>formatCss</strong>(<em>color</em> or <em>string</em>) → <em>string</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/formatter.js">src/formatter.js</a></p>
<p>Returns a CSS string for the given color, based on the CSS Color Level 4 specification. A few color spaces, such as <code>hsl</code> or <code>lab</code>, have their own functional representation in CSS. We use that whenever possible; the <code>hsl</code> color space is represented as <code>hsl(h% s l / alpha)</code>. Predefined color spaces are represented using the <code>color()</code> notation with the appropriate identifier for the color space, e.g. <code>color(display-p3 r g b / alpha)</code>. All other colors paces use the <code>color()</code> notation with a dashed identifier. For example, <code>jab</code> is represented as <code>color(--jzazbz j a b / alpha)</code>.</p>
<p>You can find the exact string produced for each color space under the <em>Serialized as</em> entry on the <a href="/color-spaces">Color Spaces</a> page.</p>
<p>Channel values are serialized as-is, with no change in the precision. To avoid compatibility issues, sRGB colors are represented as <code>color(srgb r g b / alpha)</code> rather than <code>rgb(r, g, b, alpha)</code>. For the latter, use the <a href="#formatRgb"><code>formatRgb()</code></a> method instead.</p>
<p>An alpha of exactly <code>1</code> is omitted from the representation.</p>
<p><strong>Note:</strong> The strings returned by these methods are not widely supported in current browsers and should not be used in CSS as-is.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> formatCss <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token comment">/* 
	A mode with its own function notation.
*/</span>
<span class="token function">formatCss</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'hsl'</span><span class="token punctuation">,</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token literal-property property">s</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">l</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ 'hsl(30 100% 50% / 0.5)'</span>

<span class="token comment">/*
	A predefined color space.
 */</span>
<span class="token function">formatCss</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'p3'</span><span class="token punctuation">,</span> <span class="token literal-property property">r</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token literal-property property">s</span><span class="token operator">:</span> <span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ 'color(display-p3 0.5 0.25 1)'</span>

<span class="token comment">/*
	sRGB colors.
 */</span>
<span class="token function">formatCss</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'rgb'</span><span class="token punctuation">,</span> <span class="token literal-property property">r</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token literal-property property">s</span><span class="token operator">:</span> <span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token number">0.25</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ 'color(srgb 0.5 0.25 1 / 0.25)'</span>

<span class="token comment">/*
	A custom color space.
 */</span>
<span class="token function">formatCss</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'lrgb'</span><span class="token punctuation">,</span> <span class="token literal-property property">r</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token literal-property property">s</span><span class="token operator">:</span> <span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token number">0.25</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ 'color(--srgb-linear 0.5 0.25 1 / 0.25)'</span></code></pre>
<h2>Gamut mapping</h2>
<p>Some color spaces (Lab and LCh in particular) allow you to express colors that can't be displayed on-screen. The methods below allow you to identify when that's the case and to produce displayable versions of the colors.</p>
<p><a id="inGamut" href="#inGamut">#</a> <strong>inGamut</strong>(<em>mode = &quot;rgb&quot;</em>) → <em>function (color | string)</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/clamp.js">src/clamp.js</a></p>
<p>Given a color space, returns a function with which to check whether a particular color is within the gamut of that color space.</p>
<p>This is meant to be used with RGB-based color spaces and their derivates (<code>hsl</code>, <code>hsv</code>, etc.). If the color space has no gamut limits, the function will always return <code>true</code>, regardless of the color passed to it. To find out which color spaces have gamut limits, see the <a href="/color-spaces/">Color Spaces</a> page.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> inGamut <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> inRgb <span class="token operator">=</span> <span class="token function">inGamut</span><span class="token punctuation">(</span><span class="token string">'rgb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">inRgb</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ true</span>

<span class="token function">inRgb</span><span class="token punctuation">(</span><span class="token string">'color(srgb 1.1 0 0)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ false</span></code></pre>
<p><a id="displayable" href="#displayable">#</a> <strong>displayable</strong>(<em>color</em> or <em>string</em>) → <em>boolean</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/clamp.js">src/clamp.js</a></p>
<p>Checks whether a particular color fits inside the sRGB gamut. Equivalent to <code>inGamut('rgb')</code>.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> displayable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">displayable</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ true</span>

<span class="token function">displayable</span><span class="token punctuation">(</span><span class="token string">'color(srgb 1.1 0 0)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ false</span></code></pre>
<p><a id="clampRgb" href="#clampRgb">#</a> <strong>clampRgb</strong>(<em>color</em> or <em>string</em>) → <em>color</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/clamp.js">src/clamp.js</a></p>
<p>Obtains a displayable version of the color by clamping the <code>r</code>, <code>g</code>, <code>b</code> channel values of the color's RGB representation to the interval <code>[0, 1]</code>. The returned color is in the same color space as the original color.</p>
<p>This is the faster, simpler, way to make a color displayable. It's what browsers do when you use a CSS color whose channels exceed the gamut. For example, <code>rgb(300 100 200)</code> is interpreted as <code>rgb(255 100 200)</code>.</p>
<p>Because clamping individual red, green, and blue values independently can alter their proportions in the final color, it often changes the color's hue.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> clampRgb <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token comment">// RGB clamping:</span>
<span class="token function">clampRgb</span><span class="token punctuation">(</span><span class="token string">'lab(50% 100 100)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: "lab", l: 54.29…, a: 80.81…, b: 69.88… }</span></code></pre>
<p><a id="clampGamut" href="#clampGamut">#</a> <strong>clampGamut</strong>(<em>mode = 'rgb'</em>) → <em>function(color | string)</em></p>
<p>This function extends the functionality of <code>clampRgb</code> to other color spaces. Given a color space, it returns a function with which to obtain colors within the gamut of that color space.</p>
<p>If the color space has no gamut limits, colors are returned unchanged. To find out which color spaces have gamut limits, see the <a href="/color-spaces/">Color Spaces</a> page.</p>
<p>The in-gamut color is always returned in the color space of the original color.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> formatCss<span class="token punctuation">,</span> clampGamut <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> crimson <span class="token operator">=</span> <span class="token string">'color(display-p3 0.8 0.1 0.3)'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> toRgb <span class="token operator">=</span> <span class="token function">clampGamut</span><span class="token punctuation">(</span><span class="token string">'rgb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">formatCss</span><span class="token punctuation">(</span><span class="token function">toRgb</span><span class="token punctuation">(</span>crimson<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ 'color(display-p3 0.801… 0.169… 0.302…)'</span></code></pre>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/clamp.js">src/clamp.js</a></p>
<p><a id="clampChroma" href="#clampChroma">#</a> <strong>clampChroma</strong>(<em>color</em> or <em>string</em>, <em>mode = 'lch'</em>, <em>rgbGamut = 'rgb'</em>) → <em>color</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/clamp.js">src/clamp.js</a></p>
<p>Obtains a displayable version of the color by converting it to a temporary color space containing a Chroma channel, then looking for the closest Chroma value that's displayable for the given Lightness and Hue. Compared to <code>clampRgb</code>, the function has the advantage of preserving the hue of the original color. The displayable color returned by this function will be converted back to the original color space.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> clampChroma <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">clampChroma</span><span class="token punctuation">(</span><span class="token string">'lab(50% 100 100)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: 'lab', l:50.00…, a: 63.11…, b: 63.11… }</span></code></pre>
<p>By default, the color is converted to <code>lch</code> to perform the clamping, but any color space that contains a Chroma dimension can be used by sending an explicit <code>mode</code> argument.</p>
<p>Likewise, the destination RGB gamut can be overriden with the corresponding parameter.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> clampChroma <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">clampChroma</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'oklch'</span><span class="token punctuation">,</span> <span class="token literal-property property">l</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">0.16</span><span class="token punctuation">,</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">180</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'oklch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: 'oklch', l: 0.5, c: 0.09, h: 180 }</span></code></pre>
<p>In general, chroma clamping is more accurate and computationally simpler when performed in the color's original space, where possible. Here's some sample code that uses the color's own <code>mode</code> for color spaces containing a Chroma dimension, and <code>lch</code> otherwise:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> clampChroma <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">clampChroma</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span> color<span class="token punctuation">.</span>c <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> color<span class="token punctuation">.</span>mode <span class="token operator">:</span> <span class="token string">'lch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>If the chroma-finding algorithm fails to find a displayable color (which can happen when not even the achromatic version, with <code>Chroma = 0</code>, is displayable), the method falls back to the <code>clampRgb</code> method, as a last resort.</p>
<p>The function uses <a href="https://en.wikipedia.org/wiki/Bisection_method">the bisection method</a> to speed up the search for the largest Chroma value. However, due to discontinuities in the CIELCh color space, the function is not guaranteed to return the optimal result. <a href="https://github.com/d3/d3-color/issues/33">See this discussion</a> for details.</p>
<p><a id="toGamut" href="#toGamut">#</a> <strong>toGamut</strong>(<em>dest = 'rgb'</em>, <em>mode = 'oklch'</em>, <em>delta = differenceEuclidean('oklch')</em>, <em>jnd = 0.02</em>) → <em>function (color | string)</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/clamp.js">src/clamp.js</a></p>
<p>Obtain a color that's in the <code>dest</code> gamut, by first converting it to the <code>mode</code> color space and then finding the largest chroma that's in gamut, similar to <code>clampChroma()</code>.</p>
<p>The color returned is in the <code>dest</code> color space.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> p3<span class="token punctuation">,</span> toGamut <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token string">'lch(80% 150 60)'</span><span class="token punctuation">;</span>

<span class="token function">p3</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: "p3", r: 1.229…, g: 0.547…, b: -0.073… }</span>

<span class="token keyword">const</span> toP3 <span class="token operator">=</span> <span class="token function">toGamut</span><span class="token punctuation">(</span><span class="token string">'p3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">toP3</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: "p3", r: 0.999…, g: 0.696…, b: 0.508… }</span></code></pre>
<p>To address the shortcomings of <code>clampChroma</code>, which can sometimes produce colors more desaturated than necessary, the test used in the binary search is replaced with “is color is roughly in gamut”, by comparing the candidate to the clipped version (obtained with <code>clampGamut</code>). The test passes if the colors are not to dissimilar, judged by the <code>delta</code> color difference function and an associated <code>jnd</code> just-noticeable difference value.</p>
<p>The default arguments for this function correspond to <a href="https://drafts.csswg.org/css-color/#css-gamut-mapping">the gamut mapping algorithm</a> defined in the CSS Color Module Level 4 spec, but the algorithm itself is slightly different.</p>
<p>The “roughly in gamut” aspect of the algorithm can be disabled by passing <code>null</code> for the <code>delta</code> color difference function:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> toGamut <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> clampToP3 <span class="token operator">=</span> <span class="token function">toGamut</span><span class="token punctuation">(</span><span class="token string">'p3'</span><span class="token punctuation">,</span> <span class="token string">'oklch'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The algorithm expects an LCH-like color space, containing lightness and chroma components, for the <code>mode</code> argument.</p>
<h2>Interpolation</h2>
<p>In any color space, colors occupy positions given by their values for each channel. Interpolating colors means tracing a line through the coordinates of these colors, and figuring out what colors reside on the line at various positions.</p>
<img src='/img/red-blue.png' height='20' alt='red and blue, linearly interpolated'/>
<p>Above is the path between red and blue in the RGB color space. Going from left to right, we start at red and steadily blend in more and more blue as we progress, until the color is fully blue at destination. This is a <em>linear interpolation</em> between two colors.</p>
<p><a id="interpolate" href="#interpolate">#</a> <strong>interpolate</strong>(<em>colors</em>, <em>mode = &quot;rgb&quot;</em>, <em>overrides</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/interpolate.js">src/interpolate/interpolate.js</a></p>
<p>Returns an <em>interpolator</em> in the <em>mode</em> color space for an array of <em>colors</em>. The interpolator is a function that accepts a value <em>t</em> in the interval <code>[0, 1]</code> and returns the interpolated color in the <em>mode</em> color space.</p>
<p>The colors in the array can be in any color space, or they can even be strings.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> grays <span class="token operator">=</span> <span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'#fff'</span><span class="token punctuation">,</span> <span class="token string">'#000'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">grays</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: 'rgb', r: 0.5, g: 0.5, b: 0.5 }</span></code></pre>
<p>By default, colors in all spaces are interpolated linearly across all channels. You can override the way specific channels are interpolated with the <em>overrides</em> object, the third argument of <code>interpolate()</code>.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate<span class="token punctuation">,</span> interpolatorSplineBasis <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> my_interpolator <span class="token operator">=</span> <span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'lch'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token comment">// spline instead of linear interpolation:</span>
	<span class="token literal-property property">h</span><span class="token operator">:</span> interpolatorSplineBasis
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>There are a few interpolation methods available, listed below. Depending on the channel, the numeric values can be interpreted/interpolated in various <em>modes</em>. The hue channel, for example, is interpolated by taking into account the <em>shortest path around the hue circle</em> (<code>fixupHue</code>). And the <code>fixupAlpha</code> mode assumes an <em>undefined</em> alpha is <code>1</code>.</p>
<h3>Color stop positions</h3>
<p>You can specify positions of color stops to interpolate in the way they're defined in the <a href="https://drafts.csswg.org/css-images-4/#color-stop-syntax">CSS Images Module Level 4</a> specification:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token number">0.25</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>In the image below, you can see the effect of interpolating with evenly-spaced colors (1) vs. positioned colors stops (2):</p>
<p><img src="/img/evenly-spaced-vs-positions.png" alt="Evenly spaced vs. positions"></p>
<p>To specify a positioned color stop, use an array that contains the color followed by its position. The color stops should be specified in ascending order.</p>
<p>For omitted (implicit) positions, we apply the rules <a href="https://drafts.csswg.org/css-images-4/#color-stop-syntax">from the spec</a>:</p>
<ol>
<li>if the first color doesn't have a position, it's assumed to be <code>0</code>; if the last color doesn't have a position, it's assumed to be <code>1</code>;</li>
<li>any other color stops that don't have a position will be evenly distributed along the gradient line between the positioned color stops.</li>
</ol>
<h3>Easing functions</h3>
<p>You can add easing functions between any two colors in the array:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">easeIn</span> <span class="token operator">=</span> <span class="token parameter">t</span> <span class="token operator">=></span> t <span class="token operator">*</span> t<span class="token punctuation">;</span>
<span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> easeIn<span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Any function in the <em>colors</em> array will be interpreted as an easing function, which is (for our purposes), a function that takes an argument <code>t ∈ [0, 1]</code> and returns a value <code>v ∈ [0, 1]</code>.</p>
<p>To apply the same easing function between all color pairs, instead of individual ones, add the easing as the first element in the array:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">easeIn</span> <span class="token operator">=</span> <span class="token parameter">t</span> <span class="token operator">=></span> t <span class="token operator">*</span> t<span class="token punctuation">;</span>

<span class="token comment">// this form:</span>
<span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>easeIn<span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// is equivalent to:</span>
<span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> easeIn<span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> easeIn<span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The easing function can alternatively be applied the hard way:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate<span class="token punctuation">,</span> interpolatorPiecewise<span class="token punctuation">,</span> lerp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">easeIn</span> <span class="token operator">=</span> <span class="token parameter">t</span> <span class="token operator">=></span> t <span class="token operator">*</span> t<span class="token punctuation">;</span>

<span class="token function">interpolate</span><span class="token punctuation">(</span>
	<span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">'rgb'</span><span class="token punctuation">,</span>
	<span class="token function">interpolatorPiecewise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">lerp</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">easeIn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>This formula can be helpful if you wanted to apply a different easing function per channel:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate<span class="token punctuation">,</span> interpolatorPiecewise<span class="token punctuation">,</span> lerp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">piecewiseEasing</span><span class="token punctuation">(</span><span class="token parameter">easingFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">interpolatorPiecewise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">lerp</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">easingFn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'rgb'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">r</span><span class="token operator">:</span> <span class="token function">piecewiseEasing</span><span class="token punctuation">(</span>easeIn<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token function">piecewiseEasing</span><span class="token punctuation">(</span>easeOut<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token function">piecewiseEasing</span><span class="token punctuation">(</span>easeInOut<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Culori comes with <a href="#built-in-easing-functions">just a few</a> easing functions, but you can find several online:</p>
<ul>
<li><a href="https://gist.github.com/gre/1650294">some classic easing functions</a>;</li>
<li><a href="https://github.com/mattdesl/eases">eases</a> by Matt DesLauriers;</li>
<li><a href="https://github.com/gre/bezier-easing">bezier-easing</a> by Gaëtan Renaudeau builds <code>cubic-bezier</code> easings as defined in the <a href="http://drafts.csswg.org/css-easing-1">CSS Easing Functions Level 1</a> spec;</li>
<li><a href="https://github.com/d3/d3-scale">d3-scale</a> lets you set the scale's domain and range to <code>[0, 1]</code>.</li>
</ul>
<h3>Interpolation hints</h3>
<p>Any number in the <em>colors</em> array will be interpreted as an <a href="https://drafts.csswg.org/css-images-4/#color-stop-syntax">interpolation hint</a>:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token comment">// interpolation hint:</span>
<span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>As opposed to how current browsers implement the CSS spec (<a href="https://github.com/w3c/csswg-drafts/issues/3931">see discussion</a>), interpolation hints <em>do not</em> affect color stop positions in Culori.</p>
<h3 id='built-in-easing-functions'>Built-in easing functions</h3>
<p><a id="easingMidpoint" href="#easingMidpoint">#</a> <strong>easingMidpoint</strong>(<em>H = 0.5</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/easing/midpoint.js">src/easing/midpoint.js</a></p>
<p><a href="https://github.com/w3c/csswg-drafts/issues/3935">Proposed here</a>, the <code>midpoint</code> easing function lets you shift the midpoint of a gradient like in tools such as Adobe Photoshop. You can use it with <a href="#interpolate"><code>interpolate()</code></a> as an alternative to interpolation hints:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate<span class="token punctuation">,</span> easingMidpoint <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>
<span class="token comment">// Explicit midpoint easing:</span>
<span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token function">easingMidpoint</span><span class="token punctuation">(</span><span class="token number">0.25</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ...is equivalent to:</span>
<span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><a id="easingSmoothstep" href="#easingSmoothstep">#</a> <strong>easingSmoothstep</strong></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/easing/smoothstep.js">src/easing/smoothstep.js</a></p>
<p>The <a href="https://en.wikipedia.org/wiki/Smoothstep">Smoothstep</a> easing function.</p>
<p><a id="easingSmoothstepInverse" href="#easingSmoothstepInverse">#</a> <strong>easingSmoothstep</strong></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/easing/smoothstep.js">src/easing/smoothstep.js</a></p>
<p>The inverse of the <a href="https://en.wikipedia.org/wiki/Smoothstep">Smoothstep</a> easing function.</p>
<p><a id="easingSmootherstep" href="#easingSmootherstep">#</a> <strong>easingSmootherstep</strong></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/easing/smootherstep.js">src/easing/smootherstep.js</a></p>
<p>Smootherstep is a variant of the <a href="https://en.wikipedia.org/wiki/Smoothstep">Smoothstep</a> easing function.</p>
<p><a id="easingInOutSine" href="#easingInOutSine">#</a> <strong>easingInOutSine</strong></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/easing/inOutSine.js">src/easing/inOutSine.js</a></p>
<p>Sinusoidal in-out easing. Can be used to create, for example, a cosine interpolation <a href="http://paulbourke.net/miscellaneous/interpolation/">as described by Paul Bourke</a>:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate<span class="token punctuation">,</span> easingInOutSine <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>
<span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>easingInOutSine<span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><a id="easingGamma" href="#easingGamma">#</a> <strong>easingGamma</strong>(<em>γ = 1</em>) → <em>function(t)</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/easing/gamma.js">src/easing/gamma.js</a></p>
<p>The <a href="https://en.wikipedia.org/wiki/Gamma_correction">gamma</a> easing.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> samples<span class="token punctuation">,</span> easingGamma <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>
<span class="token function">samples</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">easingGamma</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ [0, 0.0625, 0.25, 0.5625, 1]</span></code></pre>
<h3>Interpolation methods</h3>
<div class='api-figure-grid'>
<figure>
  <img src='/img/interpolator-linear.svg' width='400' height='80'/>
  <figcaption>
    <a href='#interpolatorLinear'>
      <code><strong>interpolatorLinear</strong></code>
    </a>
  </figcaption>
</figure>
<figure>
  <img src='/img/interpolator-basis.svg' width='400' height='80'/>
  <figcaption>
    <a href='#interpolatorSplineBasis'>
      <code><strong>interpolatorSplineBasis</strong></code>
    </a>
  </figcaption>
</figure>
<figure>
  <img src='/img/interpolator-basis-closed.svg' width='400' height='80'/>
  <figcaption>
    <a href='#interpolatorSplineBasisClosed'>
      <code><strong>interpolatorSplineBasisClosed</strong></code>
    </a>
  </figcaption>
</figure>
<figure>
  <img src='/img/interpolator-natural.svg' width='400' height='80'/>
  <figcaption>
    <a href='#interpolatorSplineNatural'>
      <code><strong>interpolatorSplineNatural</strong></code>
    </a>
  </figcaption>
</figure>
<figure>
  <img src='/img/interpolator-natural-closed.svg' width='400' height='80'/>
  <figcaption>
    <a href='#interpolatorSplineNaturalClosed'>
      <code><strong>interpolatorSplineNaturalClosed</strong></code>
    </a>
  </figcaption>
</figure>
<figure>
  <img src='/img/interpolator-monotone.svg' width='400' height='80'/>
  <figcaption>
    <a href='#interpolatorSplineMonotone'>
      <code><strong>interpolatorSplineMonotone</strong></code>
    </a>
  </figcaption>
</figure>
<figure>
  <img src='/img/interpolator-monotone-2.svg' width='400' height='80'/>
  <figcaption>
    <a href='#interpolatorSplineMonotone2'>
      <code><strong>interpolatorSplineMonotone2</strong></code>
    </a>
  </figcaption>
</figure>
<figure>
  <img src='/img/interpolator-monotone-closed.svg' width='400' height='80'/>
  <figcaption>
    <a href='#interpolatorSplineMonotoneClosed'>
      <code><strong>interpolatorSplineMonotoneClosed</strong></code>
    </a>
  </figcaption>
</figure>
</div>
<p>You'll use these methods when you want to override how colors get interpolated in a specific color space, or when defining the default interpolation for custom color spaces.</p>
<p><a id="interpolatorLinear" href="#interpolatorLinear">#</a> <strong>interpolatorLinear</strong>(<em>values</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/linear.js">src/interpolate/linear.js</a></p>
<img src='/img/interpolator-linear.svg' width='400' height='80'/>
<p>A linear interpolator for values in a channel.</p>
<h4>Basis splines</h4>
<p><a href="https://en.wikipedia.org/wiki/B-spline">Basis splines</a> (also called <em>B-splines</em>) are available in the following variants:</p>
<p><a id="interpolatorSplineBasis" href="#interpolatorSplineBasis">#</a> <strong>interpolatorSplineBasis</strong>(<em>values</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/splineBasis.js">src/interpolate/splineBasis.js</a></p>
<img src='/img/interpolator-basis.svg' width='400' height='80'/>
<p>A basis spline which uses one-sided finite differences for the slopes at the boundaries.</p>
<p><a id="interpolatorSplineBasisClosed" href="#interpolatorSplineBasisClosed">#</a> <strong>interpolatorSplineBasisClosed</strong>(<em>values</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/splineBasis.js">src/interpolate/splineBasis.js</a></p>
<img src='/img/interpolator-basis-closed.svg' width='400' height='80'/>
<p>A basis spline which considers the <em>values</em> array to be periodic.</p>
<h4>Natural splines</h4>
<p><a href="https://en.wikipedia.org/wiki/Spline_interpolation">Natural interpolating splines</a> are related to basis splines, as explained in <a href="https://www.math.ucla.edu/~baker/149.1.02w/handouts/dd_splines.pdf">this handout</a> by Kirby A. Baker (sections 4 and 5).</p>
<p><a id="interpolatorSplineNatural" href="#interpolatorSplineNatural">#</a> <strong>interpolatorSplineNatural</strong>(<em>values</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/splineNatural.js">src/interpolate/splineNatural.js</a></p>
<img src='/img/interpolator-natural.svg' width='400' height='80'/>
<p>A natural spline which uses one-sided finite differences for the slopes at the boundaries.</p>
<p><a id="interpolatorSplineNaturalClosed" href="#interpolatorSplineNaturalClosed">#</a> <strong>interpolatorSplineNaturalClosed</strong>(<em>values</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/splineNatural.js">src/interpolate/splineNatural.js</a></p>
<img src='/img/interpolator-natural-closed.svg' width='400' height='80'/>
<p>A natural spline which considers the <em>values</em> array to be periodic.</p>
<h4>Monotone splines</h4>
<p>The monotone splines are based on the following paper (via <a href="https://github.com/d3/d3-shape">d3-shape</a>):</p>
<blockquote>
<p>Steffen, M. <a href="https://ui.adsabs.harvard.edu/abs/1990A&amp;A...239..443S"><em>&quot;A simple method for monotonic interpolation in one dimension.&quot;</em></a> in Astronomy and Astrophysics, Vol. 239, p. 443-450 (Nov. 1990), Provided by the SAO/NASA Astrophysics Data System.</p>
</blockquote>
<p>The following variants are available:</p>
<p><a id="interpolatorSplineMonotone" href="#interpolatorSplineMonotone">#</a> <strong>interpolatorSplineMonotone</strong>(<em>values</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/splineMonotone.js">src/interpolate/splineMonotone.js</a></p>
<img src='/img/interpolator-monotone.svg' width='400' height='80'/>
<p>A monotone spline that uses one-sided finite differences to find the slopes at the boundaries.</p>
<p><a id="interpolatorSplineMonotone2" href="#interpolatorSplineMonotone2">#</a> <strong>interpolatorSplineMonotone2</strong>(<em>values</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/splineMonotone.js">src/interpolate/splineMonotone.js</a></p>
<img src='/img/interpolator-monotone-2.svg' width='400' height='80'/>
<p>A monotone spline for which we derive the slopes at the boundaries by tracing a parabola through the first/last three values.</p>
<p><a id="interpolatorSplineMonotoneClosed" href="#interpolatorSplineMonotoneClosed">#</a> <strong>interpolatorSplineMonotoneClosed</strong>(<em>values</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/splineMonotone.js">src/interpolate/splineMonotone.js</a></p>
<img src='/img/interpolator-monotone-closed.svg' width='400' height='80'/>
<p>A monotone spline which considers the <em>values</em> array to be periodic.</p>
<h4>Custom piecewise interpolation</h4>
<p><a id='interpolatorPiecewise' href='#interpolatorPiecewise'>#</a> <strong>interpolatorPiecewise</strong>(<em>interpolator</em>) <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/piecewise.js">src/interpolate/piecewise.js</a></p>
<p>Use a custom piecewise interpolator function in the form <code>function (a, b, t) =&gt; value</code>:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate<span class="token punctuation">,</span> interpolatorPiecewise <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token function-variable function">linear</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> t<span class="token punctuation">)</span> <span class="token operator">*</span> a <span class="token operator">+</span> t <span class="token operator">*</span> b<span class="token punctuation">;</span>
<span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">interpolatorPiecewise</span><span class="token punctuation">(</span>linear<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>When one of the two values to be interpolated is undefined, it will mirror the defined value: <code>[undefined, b]</code> becomes <code>[b, b]</code>. If both values are undefined, they are left as-is.</p>
<p>The <a href="#interpolatorLinear"><code>interpolatorLinear()</code></a> function uses <code>interpolatorPiecewise()</code> under the hood.</p>
<h3>Interpolation Fixup</h3>
<p>By default, channel values that need to be interpolated are treated as normal numbers. However, for some channels, the values hold special singificance and can be fixed up before interpolation for better results.</p>
<h4>Hue fixup</h4>
<p>Hue is a circular value, so there are two directions in which to interpolate between two hues (clockwise and anti-clockwise). The functions below take an array of hues and adjusts them to impose a certain interpolation direction while maintaining the absolute difference between consecutive hues.</p>
<p>Adjusted hues will not necessarily be in the <code>[0, 360)</code> interval. All fixup methods leave undefined values, and the values immediately following them, unaltered. The names of the methods come from <a href="https://github.com/w3c/csswg-drafts/issues/4735">this discussion</a>.</p>
<p><a id="fixupHueShorter" href="#fixupHueShorter">#</a> <strong>fixupHueShorter</strong>(<em>values</em>) → <em>Array</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/fixup/hue.js">src/fixup/hue.js</a></p>
<p>Adjusts the hues so that values are interpolated along the <em>shortest path around the hue circle</em>.</p>
<p>This is the default in all built-in color spaces using a hue channel. Below is an extract from the definition of the HSL color space:</p>
<pre class="language-js"><code class="language-js"><span class="token comment">/* --- hsl/definition.js --- */</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
	<span class="token literal-property property">interpolate</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span> interpolatorLinear<span class="token punctuation">,</span>
			<span class="token literal-property property">fixup</span><span class="token operator">:</span> fixupHueShorter
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">s</span><span class="token operator">:</span> interpolatorLinear<span class="token punctuation">,</span>
		<span class="token literal-property property">l</span><span class="token operator">:</span> interpolatorLinear<span class="token punctuation">,</span>
		<span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span> interpolatorLinear<span class="token punctuation">,</span>
			<span class="token literal-property property">fixup</span><span class="token operator">:</span> fixupAlpha
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>To omit the fixup and treat hues as normal numbers, use a custom interpolation on the <code>h</code> channel, and overwrite the <code>fixup</code> function with an identity function:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> hsl_long <span class="token operator">=</span> <span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'hsl'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">fixup</span><span class="token operator">:</span> <span class="token parameter">arr</span> <span class="token operator">=></span> arr
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Treating the hues array as-is (with an <em>identity function</em>) corresponds to the <code>specified</code> fixup method <a href="https://github.com/w3c/csswg-drafts/issues/4735">in the CSSWG issue</a> mentioned earlier.</p>
<p><a id="fixupHueLonger" href="#fixupHueLonger">#</a> <strong>fixupHueLonger</strong>(<em>values</em>) → <em>Array</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/fixup/hue.js">src/fixup/hue.js</a></p>
<p>Adjusts the hues so that they are interpolated along the <em>longest path around the hue circle</em>.</p>
<p><a id="fixupHueIncreasing" href="#fixupHueIncreasing">#</a> <strong>fixupHueIncreasing</strong>(<em>values</em>) → <em>Array</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/fixup/hue.js">src/fixup/hue.js</a></p>
<p>Adjusts the hues so that every hue is larger than the previous.</p>
<p><a id="fixupHueDecreasing" href="#fixupHueDecreasing">#</a> <strong>fixupHueDecreasing</strong>(<em>values</em>) → <em>Array</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/fixup/hue.js">src/fixup/hue.js</a></p>
<p>Adjusts the hues so that every hue is smaller than the previous.</p>
<h4>Alpha fixup</h4>
<p><a id="fixupAlpha" href="#fixupAlpha">#</a> <strong>fixupAlpha</strong>(<em>values</em>) → <em>Array</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/fixup/alpha.js">src/fixup/alpha.js</a></p>
<p>Turns all <code>undefined</code> values in the array to <code>1</code> (full opacity), unless <em>all</em> values in the array are <code>undefined</code>, in which case it leaves the values unaltered.</p>
<p>This is the default method for the alpha channel in all built-in color spaces.</p>
<h3>Evenly-spaced samples</h3>
<p><a id="samples" href="#samples">#</a> <strong>samples</strong>(<em>n = 2</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/samples.js">src/samples.js</a></p>
<p>Returns an array of <em>n</em> equally-spaced samples in the <code>[0, 1]</code> range, with <code>0</code> and <code>1</code> at the ends.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> samples <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">samples</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ [0, 0.5, 1]</span>

<span class="token function">samples</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ [0, 0.25, 0.5, 0.75, 1]</span></code></pre>
<p>The samples are useful for <a href="#interpolate"><code>interpolate()</code></a> to generate color scales:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> samples<span class="token punctuation">,</span> interpolate<span class="token punctuation">,</span> formatHex <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> grays <span class="token operator">=</span> <span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'#fff'</span><span class="token punctuation">,</span> <span class="token string">'#000'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">samples</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>grays<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>formatHex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ ["#ffffff", "#bfbfbf", "#808080", "#404040", "#000000"]</span></code></pre>
<p>As with the <a href="#interpolate"><code>interpolate()</code></a> method, you can map the samples through an easing function or scale to obtain a different distribution of the samples.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> samples <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> easing <span class="token keyword">from</span> <span class="token string">'bezier-easing'</span><span class="token punctuation">;</span>

<span class="token comment">// Bezier easing:</span>
<span class="token keyword">let</span> bezier <span class="token operator">=</span> <span class="token function">easing</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">samples</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>bezier<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// easeInQuad:</span>
<span class="token function">samples</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">t</span> <span class="token operator">=></span> t <span class="token operator">*</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3>Lerp</h3>
<p><a id="lerp" href="#lerp">#</a> <strong>lerp</strong>(<em>a</em>, <em>b</em>, <em>t</em>) → <em>value</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/lerp.js">src/interpolate/lerp.js</a></p>
<p>Interpolates between the values <code>a</code> and <code>b</code> at the point <code>t ∈ [0, 1]</code>.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> lerp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>
<span class="token function">lerp</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ 7.5</span></code></pre>
<p><a id="unlerp" href="#unlerp">#</a> <strong>unlerp</strong>(<em>a</em>, <em>b</em>, <em>v</em>) → <em>value</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/lerp.js">src/interpolate/lerp.js</a></p>
<p>Returns the point <code>t</code> at which the value <code>v</code> is located between the values <code>a</code> and <code>b</code>. The inverse of <code>lerp</code>.</p>
<p><a id="blerp" href="#blerp">#</a> <strong>blerp</strong>(<em>a00</em>, <em>a01</em>, <em>a10</em>, <em>a11</em>, <em>tx</em>, <em>ty</em>) → <em>value</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/lerp.js">src/interpolate/lerp.js</a></p>
<p>Perform the <a href="https://en.wikipedia.org/wiki/Bilinear_interpolation">bilinear interpolation</a> of the four values <code>a00</code>, <code>a01</code>, <code>a10</code>, and <code>a11</code> at the point <code>(tx, ty)</code>, with <code>tx, ty ∈ [0, 1]</code>. This is the extension of <code>lerp</code> to two dimensions.</p>
<p><a id="trilerp" href="#trilerp">#</a> <strong>trilerp</strong>(<em>a000</em>, <em>a010</em>, <em>a100</em>, <em>a110</em>, <em>a001</em>, <em>a011</em>, <em>a101</em>, <em>a111</em>, <em>tx</em>, <em>ty</em>, <em>tz</em>) → <em>value</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate/lerp.js">src/interpolate/lerp.js</a></p>
<p>Perform the <a href="https://en.wikipedia.org/wiki/Trilinear_interpolation">trilinear interpolation</a> of the eight values <code>a000</code>, <code>a010</code>, <code>a100</code>, <code>a110</code>, <code>a001</code>, <code>a011</code>, <code>a101</code>, and <code>a111</code> at the point <code>(tx, ty, tz)</code>, with <code>tx, ty, tz ∈ [0, 1]</code>. This is the extension of <code>lerp</code> to three dimensions.</p>
<h3>Mappings</h3>
<p><a id="mapper" href="#mapper">#</a> <strong>mapper</strong>(<em>fn</em>, <em>mode = &quot;rgb&quot;</em>) → <em>function (color | string)</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/map.js">src/map.js</a></p>
<p>Creates a mapping that applies <em>fn</em> on each channel of the color in the <em>mode</em> color space.</p>
<p>The resulting function accepts a single argument (a color object or a string), which it converts to the <em>mode</em> color space if necessary.</p>
<p>The <em>mode</em> parameter can be set to <code>null</code>, in which case the mapper will iterate through the channels in the color's original color space.</p>
<p>The <em>fn</em> callback has the following signature:</p>
<p><strong>fn</strong>(<em>value</em>, <em>channel</em>, <em>color</em>, <em>mode</em>)</p>
<p>where:</p>
<ul>
<li><code>value</code> is the current value;</li>
<li><code>channel</code> is the current channel;</li>
<li><code>color</code> is a reference to the entire color object;</li>
<li><code>mode</code> is forwarded from the call to <code>mapper</code>.</li>
</ul>
<p>Here's the implementation of alpha premultiplication:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> mapper <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> multiplyAlpha <span class="token operator">=</span> <span class="token function">mapper</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> ch<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">!==</span> <span class="token string">'alpha'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>val <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>color<span class="token punctuation">.</span>alpha <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> color<span class="token punctuation">.</span>alpha <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> val<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'rgb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">multiplyAlpha</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">r</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: 'rgb', r: 0.5, g: 0.3, b: 0.2, a: 0.5 }</span></code></pre>
<p>All channels, including <code>alpha</code>, are included in the mapping. You may want to handle the <code>alpha</code> channel differently in the callback function, like in the example above.</p>
<p>Returning <code>undefined</code> or <code>NaN</code> from the callback function will omit that channel from the resulting color object.</p>
<h4>Built-in mappings</h4>
<p><a id="mapAlphaMultiply" href="#mapAlphaMultiply">#</a> <strong>mapAlphaMultiply</strong></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/map.js">src/map.js</a></p>
<p>Multiplies the color's alpha value into all its other channels:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> mapper<span class="token punctuation">,</span> mapAlphaMultiply <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> multiplyAlpha <span class="token operator">=</span> <span class="token function">mapper</span><span class="token punctuation">(</span>mapAlphaMultiply<span class="token punctuation">,</span> <span class="token string">'rgb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">multiplyAlpha</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">r</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: 'rgb', r: 0.5, g: 0.3, b: 0.2, a: 0.5 }</span></code></pre>
<p>Any <code>undefined</code> channel value will be considered to be <code>0</code> (zero), to enable alpha-premultiplied interpolation with achromatic colors in hue-based color spaces (HSL, LCh, etc.).</p>
<p><a id="mapAlphaDivide" href="#mapAlphaDivide">#</a> <strong>mapAlphaDivide</strong></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/map.js">src/map.js</a></p>
<p>Divides a color's other channels by its alpha value. It's the opposite of <code>mapAlphaMultiply</code>, and is used in interpolation with alpha premultiplication:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> mapper<span class="token punctuation">,</span> mapAlphaMultiply<span class="token punctuation">,</span> mapAlphaDivide <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> multiplyAlpha <span class="token operator">=</span> <span class="token function">mapper</span><span class="token punctuation">(</span>mapAlphaMultiply<span class="token punctuation">,</span> <span class="token string">'rgb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> divideAlpha <span class="token operator">=</span> <span class="token function">mapper</span><span class="token punctuation">(</span>mapAlphaDivide<span class="token punctuation">,</span> <span class="token string">'rgb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">divideAlpha</span><span class="token punctuation">(</span><span class="token function">multiplyAlpha</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">r</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: 'rgb', r: 1, g: 0.6, b: 0.4, a: 0.5 }</span></code></pre>
<p>Any <code>undefined</code> channel value will be considered to be <code>0</code> (zero), to enable alpha-premultiplied interpolation with achromatic colors in hue-based color spaces (HSL, LCh, etc.).</p>
<p><a id="mapTransferLinear" href="#mapTransferLinear">#</a> <strong>mapTransferLinear</strong>(<em>slope = 1</em>, <em>intercept = 0</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/map.js">src/map.js</a></p>
<p><a id="mapTransferGamma" href="#mapTransferGamma">#</a> <strong>mapTransferGamma</strong>(<em>amplitude = 1</em>, <em>exponent = 1</em>, <em>offset = 0</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/map.js">src/map.js</a></p>
<h4>Interpolating with mappings</h4>
<p><a id="interpolateWith" href="#interpolateWith">#</a> <strong>interpolateWith</strong>(<em>premap</em>, <em>postmap</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate.js">src/interpolate.js</a></p>
<p>Adds a <em>pre-mapping</em> and a <em>post-mapping</em> to an interpolation, to enable things like alpha premultiplication:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolateWith<span class="token punctuation">,</span> mapAlphaMultiply<span class="token punctuation">,</span> mapAlphaDivide <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> interpolateWithAlphaPremult <span class="token operator">=</span> <span class="token function">interpolateWith</span><span class="token punctuation">(</span>
	mapAlphaMultiply<span class="token punctuation">,</span>
	mapAlphaDivide
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">interpolateWithAlphaPremult</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'transparent'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">0.25</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>To chain more than one mapping:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolateWith<span class="token punctuation">,</span> mapAlphaMultiply<span class="token punctuation">,</span> mapAlphaDivide <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapChromaMultiply</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">v<span class="token punctuation">,</span> ch<span class="token punctuation">,</span> c<span class="token punctuation">,</span> mode</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapChromaDivide</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">v<span class="token punctuation">,</span> ch<span class="token punctuation">,</span> c<span class="token punctuation">,</span> mode</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> interpolateWithAlphaChromaPremult <span class="token operator">=</span> <span class="token function">interpolateWith</span><span class="token punctuation">(</span>
	<span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">mapChromaMultiply</span><span class="token punctuation">(</span><span class="token function">mapAlphaMultiply</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">mapAlphaDivide</span><span class="token punctuation">(</span><span class="token function">mapChromaDivide</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">interpolateWithAlphaPremult</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'transparent'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">0.25</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><a id="interpolateWithPremultipliedAlpha" href="#interpolateWithPremultipliedAlpha">#</a> <strong>interpolateWithPremultipliedAlpha</strong>(<em>colors</em>, <em>mode = &quot;rgb&quot;</em>, <em>overrides</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/interpolate.js">src/interpolate.js</a></p>
<p>Takes the same arguments as <a href="#interpolate"><code>interpolate()</code></a>, but applies <a href="https://drafts.csswg.org/css-images-4/#premultiplied">alpha premultiplication</a>.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate<span class="token punctuation">,</span> interpolateWithPremultipliedAlpha <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'transparent'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// alpha ignored for the R/G/B channels:</span>
<span class="token function">interpolate</span><span class="token punctuation">(</span>colors<span class="token punctuation">,</span> <span class="token string">'rgb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// alpha premultiplied into the R/G/B channels:</span>
<span class="token function">interpolateWithPremultipliedAlpha</span><span class="token punctuation">(</span>colors<span class="token punctuation">,</span> <span class="token string">'rgb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>Color Difference</h2>
<p>These methods are concerned to finding the <a href="https://en.wikipedia.org/wiki/Color_difference">distance between two colors</a> based on various formulas. Each of these formulas will return a <em>function (colorA, colorB)</em> that lets you measure the distance between two colors.</p>
<h3>Euclidean distance</h3>
<p><a id="differenceEuclidean" href="#differenceEuclidean">#</a> <strong>differenceEuclidean</strong>(<em>mode = 'rgb'</em>, <em>weights = [1, 1, 1, 0]</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/difference.js">src/difference.js</a></p>
<p>Returns a <a href="https://en.wikipedia.org/wiki/Color_difference#Euclidean">Euclidean distance</a> function in a certain color space.</p>
<p>You can optionally assign different weights to the channels in the color space. See, for example, the <a href="#differenceKotsarenkoRamos">Kotsarenko/Ramos distance</a> or <a href="#differenceItp">ΔE<sub>ITP</sub></a>.</p>
<p>The default weights <code>[1, 1, 1, 0]</code> mean that the <em>alpha</em>, which is the fourth channel in all the color spaces Culori defines, is not taken into account. Send <code>[1, 1, 1, 1]</code> as the weights to include it in the computation.</p>
<p>In cylindrical spaces, the hue is factored into the Euclidean distance in a variety of ways. The functions below are used internally:</p>
<p><a id="differenceHueChroma" href="#differenceHueChroma">#</a> <strong>differenceHueChroma</strong>(<em>colorA</em>, <em>colorB</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/difference.js">src/difference.js</a></p>
<p>Computes the hue contribution as the geometric mean of chord lengths belonging to the chromas of the two colors. This is the handling of hue in cylindrical forms of CIE-related color spaces: <code>lch</code>, <code>lchuv</code>, <code>dlch</code>, <code>oklch</code>, <code>jch</code>.</p>
<p><a id="differenceHueSaturation" href="#differenceHueSaturation">#</a> <strong>differenceHueSaturation</strong>(<em>colorA</em>, <em>colorB</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/difference.js">src/difference.js</a></p>
<p>Computes the hue contribution as the geometric mean of chord lengths belonging to the saturations of the two colors. This is the handling of hue in the HSL / HSV / HSI family of color spaces.</p>
<p><a id="differenceHueNaive" href="#differenceHueNaive">#</a> <strong>differenceHueNaive</strong>(<em>colorA</em>, <em>colorB</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/difference.js">src/difference.js</a></p>
<p>For remaining color spaces (HWB), we consider hues numbers, but apply a <em>shortest path around the hue circle</em> (analogous to <a href="#fixupHueShorter"><code>fixupHueShorter</code></a>). If you insist on using Euclidean distances on these spaces, you can use the <code>weights</code> to control the contribution of the hue difference towards the total difference.</p>
<h3>CIE color difference formulas</h3>
<p>All these color difference functions operate on the <code>lab65</code> color space.</p>
<p><a id="differenceCie76" href="#differenceCie76">#</a> <strong>differenceCie76</strong>()</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/difference.js">src/difference.js</a></p>
<p>Computes the <a href="https://en.wikipedia.org/wiki/Color_difference#CIE76">CIE76</a> ΔE*<sub>ab</sub> color difference between the colors <em>a</em> and <em>b</em>. The function is identical to <a href="#differenceEuclidean"><code>differenceEuclidean('lab65')</code></a>.</p>
<p><a id="differenceCie94" href="#differenceCie94">#</a> <strong>differenceCie94</strong>(<em>kL = 1</em>, <em>K1 = 0.045</em>, <em>K2 = 0.015</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/difference.js">src/difference.js</a></p>
<p>Computes the <a href="https://en.wikipedia.org/wiki/Color_difference#CIE94">CIE94</a> ΔE*<sub>94</sub> color difference between the colors <em>a</em> and <em>b</em>.</p>
<p><a id="differenceCiede2000" href="#differenceCiede2000">#</a> <strong>differenceCiede2000</strong>(<em>Kl = 1</em>, <em>Kc = 1</em>, <em>Kh = 1</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/difference.js">src/difference.js</a></p>
<p>Computes the <a href="https://en.wikipedia.org/wiki/Color_difference#CIEDE2000">CIEDE2000</a> ΔE*<sub>00</sub> color difference between the colors <em>a</em> and <em>b</em> as implemented by <a href="http://www2.ece.rochester.edu/~gsharma/ciede2000/">G. Sharma</a>.</p>
<p><a id="differenceCmc" href="#differenceCmc">#</a> <strong>differenceCmc</strong>()</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/difference.js">src/difference.js</a></p>
<p>Computes the <a href="https://en.wikipedia.org/wiki/Color_difference#CMC_l:c_(1984)">CMC l:c (1984)</a> ΔE*<sub>CMC</sub> color difference between the colors <em>a</em> and <em>b</em>.</p>
<p>ΔE*<sub>CMC</sub> is not considered a metric since it's not symmetrical, that is the distance from <em>a</em> to <em>b</em> is not always equal to the distance from <em>b</em> to <em>a</em>. Therefore it cannot be reliably used with <a href="#nearest"><code>nearest()</code></a>.</p>
<p><a id="differenceHyab" href="#differenceHyab">#</a> <strong>differenceHyab</strong>()</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/difference.js">src/difference.js</a></p>
<p>Computes the HyAB color difference between the colors <em>a</em> and <em>b</em>, as proposed in:</p>
<blockquote>
<p>Abasi S, Amani Tehran M, Fairchild MD. <em>Distance metrics for very large color differences.</em> Color Res Appl. 2019; 1–16. https://doi.org/10.1002/col.22451 (<a href="http://markfairchild.org/PDFs/PAP40.pdf">PDF</a>)</p>
</blockquote>
<p>The HyAB formula combines the Euclidean and <a href="https://en.wikipedia.org/wiki/Taxicab_geometry">city block</a> distance and has been experimentally shown to work better for large color differences than CIEDE2000, while still holding up well for smaller color differences, making it a <em>&quot;good candidate formula for image processing and computer vision applications&quot;</em>.</p>
<h3>Other difference formulas</h3>
<p><a id="differenceKotsarenkoRamos" href="#differenceKotsarenkoRamos">#</a> <strong>differenceKotsarenkoRamos</strong>()</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/difference.js">src/difference.js</a></p>
<p>Computes the <a href="http://www.progmat.uaem.mx:8080/artVol2Num2/Articulo3Vol2Num2.pdf">Kotsarenko/Ramos</a> color difference between the colors <em>a</em> and <em>b</em>. This is a weighted Euclidean distance in the <code>yiq</code> color space.</p>
<p><a id="differenceItp" href="#differenceItp">#</a> <strong>differenceItp</strong>()</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/difference.js">src/difference.js</a></p>
<p>Computes the <a href="https://www.itu.int/rec/R-REC-BT.2124/en">ΔE<sub>ITP</sub></a> color difference metric between the colors <em>a</em> and <em>b</em>. This is a weighted Euclidean distance in the <code>itp</code> color space, scaled by a factor of 720 so that a the just-noticeable difference (<abbr>JND</abbr>) corresponds to a value of 1.</p>
<h3>Nearest color(s)</h3>
<p><a id="nearest" href="#nearest">#</a> <strong>nearest</strong>(<em>colors</em>, <em>metric = differenceEuclidean()</em>, <em>accessor = identity</em>) → <em>function(color, n = 1, τ = Infinity)</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/nearest.js">src/nearest.js</a></p>
<p>Takes a <em>colors</em> array and a <em>metric</em> color difference formula, and returns a function with which you can find <em>n</em> colors nearest to <em>color</em>, with a maximum distance of <em>τ</em>. Use <em>n = Infinity</em> to get all colors in the array with a maximum distance of <em>τ</em>.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">/*
	Example: get three CSS named colors closest to any color
 */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> colorsNamed<span class="token punctuation">,</span> nearest<span class="token punctuation">,</span> differenceCiede2000 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> colors <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>colorsNamed<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> nearestNamedColors <span class="token operator">=</span> <span class="token function">nearest</span><span class="token punctuation">(</span>colors<span class="token punctuation">,</span> <span class="token function">differenceCiede2000</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">nearestNamedColors</span><span class="token punctuation">(</span><span class="token string">'lch(50% 70 60)'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// => ["chocolate", "sienna", "peru"]</span></code></pre>
<p>By default, <em>colors</em> needs to be an array of color values. If your array contains something other than a simple color value, you can provide the <code>accessor</code> argument to point to the color value associated with each item in the array.</p>
<p>The example below shows a common data structure for a color palette: an object whose keys are the names and whose values are their associated color representations.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> nearest<span class="token punctuation">,</span> differenceEuclidean <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token comment">/*
	Example: get the closest color from a palette
 */</span>
<span class="token keyword">let</span> palette <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">Burgundy</span><span class="token operator">:</span> <span class="token string">'#914e72'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">Blue</span><span class="token operator">:</span> <span class="token string">'#0078bf'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">Green</span><span class="token operator">:</span> <span class="token string">'#00a95c'</span><span class="token punctuation">,</span>
	<span class="token string-property property">'Medium Blue'</span><span class="token operator">:</span> <span class="token string">'#3255a4'</span><span class="token punctuation">,</span>
	<span class="token string-property property">'Bright Red'</span><span class="token operator">:</span> <span class="token string">'#f15060'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> names <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>palette<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> nearestColors <span class="token operator">=</span> <span class="token function">nearest</span><span class="token punctuation">(</span>
	names<span class="token punctuation">,</span>
	<span class="token function">differenceEuclidean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token parameter">name</span> <span class="token operator">=></span> palette<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">nearestColors</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// => ["Bright Red"]</span></code></pre>
<h2>Blending</h2>
<p>Culori makes available the separable blend modes defined in the W3C <a href="https://drafts.fxtf.org/compositing-2/">Compositing and Blending Level 2</a> specification.</p>
<p><a id="blend" href="#blend">#</a> <strong>blend</strong>(<em>colors</em>, <em>type = 'normal'</em>, <em>mode = 'rgb'</em>) → <em>color</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/blend.js">src/blend.js</a></p>
<p>A separable blend mode is a simple formula that gets applied to each channel in the color space independently. The available blend modes are <code>color-burn</code>, <code>color-dodge</code>, <code>darken</code>, <code>difference</code>, <code>exclusion</code>, <code>hard-light</code>, <code>lighten</code>, <code>multiply</code>, <code>normal</code>, <code>overlay</code>, <code>screen</code>
, and <code>soft-light</code>. They are designed to work on RGB colors, so <em>mode</em> is expected to be <code>rgb</code> or <code>lrgb</code>.</p>
<p>An example of blending three colors:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> blend <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">blend</span><span class="token punctuation">(</span>
	<span class="token punctuation">[</span><span class="token string">'rgba(255, 0, 0, 0.5)'</span><span class="token punctuation">,</span> <span class="token string">'rgba(0, 255, 0, 0.5)'</span><span class="token punctuation">,</span> <span class="token string">'rgba(0, 0, 255, 0.5)'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">'screen'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: 'rgb', alpha: 0.875, r: 0.57…, g: 0.57…, b:0.57… }</span></code></pre>
<p>In addition to strings, the <em>type</em> parameter supports a <em>function (b, s) → v</em> that takes the values of the <em>backdrop</em> and <em>source</em> color to return the blended value. This allows you to write your own (separable) blending functions. For example, an <em>average</em> blending mode:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> blend <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">blend</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token function">average</span><span class="token punctuation">(</span><span class="token parameter">b<span class="token punctuation">,</span> s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>b <span class="token operator">+</span> s<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The non-separable blend modes — <code>color</code>, <code>hue</code>, <code>saturation</code>, and <code>lightness</code> — are not available. The effect which they mean to produce is better obtained with simple formulas on a cylindrical color space (e.g. HSL).</p>
<h2>Average color</h2>
<p><a id="average" href="#average">#</a> <strong>average</strong>(<em>colors</em>, <em>mode = 'rgb'</em>, <em>overrides</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/average.js">src/average.js</a></p>
<p>Returns the average color of the <em>colors</em> array, in the color space specified by the <em>mode</em> argument. The color is obtained by the arithmetic average of values on each individual channel.</p>
<p>Colors with undefined values on a channel don't participate in the average for that channel.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> average <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'salmon'</span><span class="token punctuation">,</span> <span class="token string">'tomato'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'lab'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { 'mode': 'lab', l: 65.41…, a: 53.00…, b: 39.01… }</span></code></pre>
<p><a id="averageNumber" href="#averageNumber">#</a> <strong>averageNumber</strong>(<em>values</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/average.js">src/average.js</a></p>
<p>The arithmetic mean of values in the <em>values</em> array.</p>
<p><a id="averageAngle" href="#averageAngle">#</a> <strong>averageAngle</strong>(<em>values</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/average.js">src/average.js</a></p>
<p>The function used by default to average hue values in all built-in color spaces, using the formula for <a href="https://en.wikipedia.org/wiki/Mean_of_circular_quantities">the mean of circular quantities</a>.</p>
<h2>Random colors</h2>
<p><a id="random" href="#random">#</a> <strong>random</strong>(<em>mode = 'rgb'</em>, <em>constraints = {}</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/random.js">src/random.js</a></p>
<p>Obtain a random color from a particular color space, with optional constraints. The resulting color will be in the color space from where it has been picked.</p>
<p>Basic usage:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> random <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: 'rgb', r: 0.75, g: 0.12, b: 0.99 }</span></code></pre>
<h3>Specifying constraints</h3>
<p>Random colors are, by definition, all over the color space and not all of them will look particularly nice. Some color spaces, such as HSL or HSV, are also biased towards colors close to black and/or white, because of the way these color spaces stretch the RGB cube into cylinders.</p>
<p>For more control on how the colors are generated, you can specify constraints for each individual channel in the color space. Constraints can be either a <em>constant number</em> or an <em>interval</em> from where to pick the channel value:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> random <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">random</span><span class="token punctuation">(</span><span class="token string">'hsv'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token comment">// number</span>
	<span class="token literal-property property">s</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token number">0.75</span><span class="token punctuation">]</span> <span class="token comment">// interval</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: 'hsv', h: 120, s: 0.51…, v: 0.89… }</span></code></pre>
<p>The <em>alpha</em> channel is excluded by default. To obtain colors with random alpha values, include a constraint for <code>alpha</code>:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> random <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">random</span><span class="token punctuation">(</span><span class="token string">'lrgb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: 'lrgb', r: 0.74…, g: 0.15…, b: 0.34… }</span>

<span class="token function">random</span><span class="token punctuation">(</span><span class="token string">'lrgb'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: 'lrgb', r: 0.33…, g: 0.72…, b: 0.04…, alpha: 0.12… }</span></code></pre>
<h3>Displayable random colors</h3>
<p>The value for any channel in the color space for which there are no constraints will be picked from the entire range of that channel. However, some color spaces, such as CIELAB or CIELCH, don't have explicit ranges for certain channels; for these, some approximate ranges <a href="https://github.com/evercoder/culori/blob/main/tools/ranges.js">have been pre-computed</a> as the limits of the displayable sRGB gamut.</p>
<p>Even with these ranges in place, a combination of channel values may not be displayable. Check if that's the case with <a href="#displayable"><code>displayable()</code></a>, and pass the color through a <a href="#clampRgb"><code>clamp*</code></a> function to obtain a displayable version.</p>
<h2>WCAG utilities</h2>
<p>A couple of utility functions based on the <a href="https://www.w3.org/TR/WCAG20/">Web Content Acccessibility Guidelines 2.0 specification</a>.</p>
<p><a id="wcagLuminance" href="#wcagLuminance">#</a> <strong>wcagLuminance</strong>(<em>color</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/wcag.js">src/wcag.js</a></p>
<p>Computes the <a href="https://www.w3.org/TR/WCAG20/#relativeluminancedef">relative luminance</a> of a color.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> wcagLuminance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">wcagLuminance</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ 0.2126</span></code></pre>
<p><a id="wcagContrast" href="#wcagContrast">#</a> <strong>wcagContrast</strong>(<em>colorA</em>, <em>colorB</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/wcag.js">src/wcag.js</a></p>
<p>Computes the <a href="https://www.w3.org/TR/WCAG20/#contrast-ratiodef">contrast ratio</a> between two colors.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> wcagContrast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">wcagContrast</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'black'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ 5.252</span></code></pre>
<h2>Filters</h2>
<p>Filters apply certain graphical effects to a color. Culori currently implements two sets of filter functions:</p>
<h3>CSS Filter Effects</h3>
<p>These correspond to the filter effects defined in the W3C <a href="https://drafts.fxtf.org/filter-effects-1/">Filter Effects Module Level 1</a> specification.</p>
<p>The <em>amount</em> parameter is usually in the <code>[0, 1]</code> interval, but may go above <code>1</code> for some filters. The filters were designed for RGB colors, so the <em>mode</em> parameter is expected to be <code>rgb</code> or <code>lrgb</code>.</p>
<p>The resulting color is returned in the color space of the original color.</p>
<p><a id="filterBrightness" href="#filterBrightness">#</a> <strong>filterBrightness</strong>(<em>amount = 1</em>, <em>mode = 'rgb'</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/filter.js">src/filter.js</a></p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter-function/brightness"><code>brightness()</code></a> CSS filter. An <em>amount</em> of <code>1</code> leaves the color unchanged. Smaller values darken the color (with <code>0</code> being fully black), while larger values brighten it.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> filterBrightness <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> brighten <span class="token operator">=</span> <span class="token function">filterBrightness</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'lrgb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">brighten</span><span class="token punctuation">(</span><span class="token string">'salmon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ { mode: 'rgb', r: 1.32…, g: 0.68…, b: 0.61… }</span></code></pre>
<p><a id="filterContrast" href="#filterContrast">#</a> <strong>filterContrast</strong>(<em>amount = 1</em>, <em>mode = 'rgb'</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/filter.js">src/filter.js</a></p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter-function/contrast"><code>contrast()</code></a> filter. An <em>amount</em> of <code>1</code> leaves the color unchanged. Smaller values decrease the contrast (with <code>0</code> being fully gray), while larger values increase it.</p>
<p><a id="filterSepia" href="#filterSepia">#</a> <strong>filterSepia</strong>(<em>amount = 1</em>, <em>mode = 'rgb'</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/filter.js">src/filter.js</a></p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter-function/sepia"><code>sepia()</code></a> filter. An <em>amount</em> of <code>0</code> leaves the color unchanged, and <code>1</code> applies the sepia effect fully.</p>
<p><a id="filterGrayscale" href="#filterGrayscale">#</a> <strong>filterGrayscale</strong>(<em>amount = 1</em>, <em>mode = 'rgb'</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/filter.js">src/filter.js</a></p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter-function/grayscale"><code>grayscale()</code></a> filter. An <em>amount</em> of <code>0</code> leaves the color unchanged, and <code>1</code> makes the color fully achromatic.</p>
<p><a id="filterSaturate" href="#filterSaturate">#</a> <strong>filterSaturate</strong>(<em>amount = 1</em>, <em>mode = 'rgb'</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/filter.js">src/filter.js</a></p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter-function/saturate"><code>saturate()</code></a> filter. An <em>amount</em> of <code>1</code> leaves the color unchanged. Smaller values desaturate the color (with <code>0</code> being fully achromatic), while larger values saturate it.</p>
<p><a id="filterInvert" href="#filterInvert">#</a> <strong>filterInvert</strong>(<em>amount = 1</em>, <em>mode = 'rgb'</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/filter.js">src/filter.js</a></p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter-function/invert"><code>invert()</code></a> filter. An <em>amount</em> of <code>0</code> leaves the color unchanged, and <code>1</code> makes the color fully inverted.</p>
<p><a id="filterHueRotate" href="#filterHueRotate">#</a> <strong>filterHueRotate</strong>(<em>degrees = 0</em>, <em>mode = 'rgb'</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/filter.js">src/filter.js</a></p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter-function/hue-rotate"><code>hue-rotate()</code></a> filter.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> samples<span class="token punctuation">,</span> interpolate<span class="token punctuation">,</span> filterSepia<span class="token punctuation">,</span> formatHex <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">samples</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">filterSepia</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>formatHex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ⇒ ["#751800", "#664200", "#576c00", "#1a3e82", "#0010ff"];</span></code></pre>
<p>Some of the effects may be obtained more straightforwardly with simple calculations in other color spaces. For example, <a href="#filterHueRotate">hue rotation</a> can just as well be implemented as <code>color.h += angle</code> in a cylindrical color space such as HSL.</p>
<h3>Color vision deficiency (CVD) simulation</h3>
<p>Simulate how a color may be perceived by people with color vision deficiencies (CVD).</p>
<p><a id="filterDeficiencyProt" href="#filterDeficiencyProt">#</a> <strong>filterDeficiencyProt</strong>(<em>severity = 1</em>) → <em>function (color)</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/deficiency.js">src/deficiency.js</a></p>
<p>Simulate protanomaly and protanopia. The <code>severity</code> parameter is in the interval <code>[0, 1]</code>, where <code>0</code> corresponds to normal vision and <code>1</code> (the default value) corresponds to protanopia.</p>
<p><a id="filterDeficiencyDeuter" href="#filterDeficiencyDeuter">#</a> <strong>filterDeficiencyDeuter</strong>(<em>severity = 1</em>) → <em>function (color)</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/deficiency.js">src/deficiency.js</a></p>
<p>Simulate deuteranomaly and deuteranopia. The <code>severity</code> parameter is in the interval <code>[0, 1]</code>, where <code>0</code> corresponds to normal vision and <code>1</code> (the default value) corresponds to deuteranopia.</p>
<p><a id="filterDeficiencyTrit" href="#filterDeficiencyTrit">#</a> <strong>filterDeficiencyTrit</strong>(<em>severity = 1</em>) → <em>function (color)</em></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/deficiency.js">src/deficiency.js</a></p>
<p>Simuate tritanomaly and tritanopia. The <code>severity</code> parameter is in the interval <code>[0, 1]</code>, where <code>0</code> corresponds to normal vision and <code>1</code> (the default value) corresponds to tritanopia.</p>
<p>Examples:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> interpolate<span class="token punctuation">,</span> filterDeficiencyProt<span class="token punctuation">,</span> formatHex <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>
culori
	<span class="token punctuation">.</span><span class="token function">samples</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">filterDeficiencyProt</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>formatHex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ⇒ ["#751800", "#664200", "#576c00", "#1a3e82", "#0010ff"];</span></code></pre>
<p>Based on the work of Machado, Oliveira and Fernandes (2009), using <a href="https://www.inf.ufrgs.br/~oliveira/pubs_files/CVD_Simulation/CVD_Simulation.html">precomputed matrices</a> provided by the authors. References thanks to the <a href="http://colorspace.r-forge.r-project.org/reference/simulate_cvd.html"><code>colorspace</code> package for R</a>.</p>
<blockquote>
<p>G. M. Machado, M. M. Oliveira and L. A. F. Fernandes, <em>&quot;A Physiologically-based Model for Simulation of Color Vision Deficiency,&quot;</em> in IEEE Transactions on Visualization and Computer Graphics, vol. 15, no. 6, pp. 1291-1298, Nov.-Dec. 2009, <a href="https://doi.ieeecomputersociety.org/10.1109/TVCG.2009.113">doi: 10.1109/TVCG.2009.113</a>.</p>
</blockquote>
<h2>Miscellaneous</h2>
<p><a id="colorsNamed" href="#colorsNamed">#</a> <strong>colorsNamed</strong></p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/colors/named.js">src/colors/named.js</a></p>
<p>An object whose keys are all the CSS named colors.</p>
<p><a id="round" href="#round">#</a> <strong>round</strong>(<em>n = 8</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/round.js">src/round.js</a></p>
<p>Returns a <em>rounder</em>: a function with which to round numbers to at most <em>n</em> digits of precision.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> round <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> approx <span class="token operator">=</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">approx</span><span class="token punctuation">(</span><span class="token number">0.38393993</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ 0.3839</span></code></pre>
<h2 id='color-spaces'>
  <a href='#color-spaces'>#</a>
  Available color spaces
</h2>
<p>The default import (<code>culori</code>) comes with all the color spaces pre-registered into the library. For convenience, you can also import directly <code>mode</code> as a shortcut to <a href="#converter"><code>converter(mode)</code></a>. For example, instead of <a href="#converter"><code>converter('hsl')</code></a>, you can import <code>hsl</code>:</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// Instead of this:</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> converter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> hsl <span class="token operator">=</span> <span class="token function">converter</span><span class="token punctuation">(</span><span class="token string">'hsl'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// You can do this:</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> hsl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span></code></pre>
<p>On the other hand, when importing the <a href="/guides/tree-shaking">tree-shaken version</a> (<code>culori/fn</code>), color spaces need to be registered manually with <a href="#useMode"><code>useMode()</code></a> based on their <strong>definition object</strong>:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useMode<span class="token punctuation">,</span> modeHsl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori/fn'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> hsl <span class="token operator">=</span> <span class="token function">useMode</span><span class="token punctuation">(</span>modeHsl<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The table below summarizes two pieces of information:</p>
<ul>
<li>What the <code>mode</code> is for a specific color space built into Culori, which is also the name of the shortcut to the converter for that color space.</li>
<li>What the definition object for a color space is called.</li>
</ul>
<p>The available color spaces are discussed into more detail on the <a href="/color-spaces">Color Spaces</a> page.</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Color space</th>
<th>Definition object</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>a98</code></td>
<td>A98 RGB color space, compatible with Adobe RGB (1998)</td>
<td><code>modeA98</code></td>
</tr>
<tr>
<td><code>cubehelix</code></td>
<td>Cubehelix color space</td>
<td><code>modeCubehelix</code></td>
</tr>
<tr>
<td><code>dlab</code></td>
<td>DIN99o Lab color space</td>
<td><code>modeDlab</code></td>
</tr>
<tr>
<td><code>dlch</code></td>
<td>DIN99o LCh color space</td>
<td><code>modeDlch</code></td>
</tr>
<tr>
<td><code>hsi</code></td>
<td>HSI color space</td>
<td><code>modeHsi</code></td>
</tr>
<tr>
<td><code>hsl</code></td>
<td>HSL color space</td>
<td><code>modeHsl</code></td>
</tr>
<tr>
<td><code>hsv</code></td>
<td>HSV color space</td>
<td><code>modeHsv</code></td>
</tr>
<tr>
<td><code>hwb</code></td>
<td>HWB color space</td>
<td><code>modeHwb</code></td>
</tr>
<tr>
<td><code>itp</code></td>
<td>IC<sub>t</sub>C<sub>p</sub> color space</td>
<td><code>modeItp</code></td>
</tr>
<tr>
<td><code>jab</code></td>
<td>J<sub>z</sub>a<sub>z</sub>b<sub>z</sub> color space</td>
<td><code>modeJab</code></td>
</tr>
<tr>
<td><code>jch</code></td>
<td>J<sub>z</sub>a<sub>z</sub>b<sub>z</sub> in cylindrical form</td>
<td><code>modeJch</code></td>
</tr>
<tr>
<td><code>lab</code></td>
<td>CIELAB color space (D50 Illuminant)</td>
<td><code>modeLab</code></td>
</tr>
<tr>
<td><code>lab65</code></td>
<td>CIELAB color space (D65 Illuminant)</td>
<td><code>modeLab65</code></td>
</tr>
<tr>
<td><code>lch</code></td>
<td>CIELCh color space (D50 Illuminant)</td>
<td><code>modeLch</code></td>
</tr>
<tr>
<td><code>lch65</code></td>
<td>CIELCh color space (D65 Illuminant)</td>
<td><code>modeLch65</code></td>
</tr>
<tr>
<td><code>lchuv</code></td>
<td>CIELCHuv color space (D50 Illuminant)</td>
<td><code>modeLchuv</code></td>
</tr>
<tr>
<td><code>lrgb</code></td>
<td>Linear-light sRGB color space</td>
<td><code>modeLrgb</code></td>
</tr>
<tr>
<td><code>luv</code></td>
<td>CIELUV color space (D50 Illuminant)</td>
<td><code>modeLuv</code></td>
</tr>
<tr>
<td><code>oklab</code></td>
<td>Oklab color space</td>
<td><code>modeOklab</code></td>
</tr>
<tr>
<td><code>oklch</code></td>
<td>Oklab color space, cylindrical form</td>
<td><code>modeOklch</code></td>
</tr>
<tr>
<td><code>p3</code></td>
<td>Display P3 color space</td>
<td><code>modeP3</code></td>
</tr>
<tr>
<td><code>prophoto</code></td>
<td>ProPhoto RGB color space</td>
<td><code>modeProphoto</code></td>
</tr>
<tr>
<td><code>rec2020</code></td>
<td>Rec. 2020 RGB color space</td>
<td><code>modeRec2020</code></td>
</tr>
<tr>
<td><code>rgb</code></td>
<td>sRGB color space</td>
<td><code>modeRgb</code></td>
</tr>
<tr>
<td><code>xyb</code></td>
<td>XYB color space</td>
<td><code>modeXyb</code></td>
</tr>
<tr>
<td><code>xyz50</code></td>
<td>XYZ with D50 white-point</td>
<td><code>modeXyz50</code></td>
</tr>
<tr>
<td><code>xyz65</code></td>
<td>XYZ with D65 white-point</td>
<td><code>modeXyz65</code></td>
</tr>
<tr>
<td><code>yiq</code></td>
<td>YIQ color space</td>
<td><code>modeYiq</code></td>
</tr>
</tbody>
</table>
<h2>Extending culori</h2>
<p><a id="useMode" href="#useMode">#</a> <strong>useMode</strong>(<em>definition</em>) → <em>function</em>.</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/modes.js">src/modes.js</a></p>
<p>Defines a new color space based on its <em>definition</em>. See <a href="#color-mode-def">Color mode definition</a> for the expected object shape.</p>
<p>Returns a converter function for the newly defined mode.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useMode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> hsl <span class="token operator">=</span> <span class="token function">useMode</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'hsl'</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">hsl</span><span class="token punctuation">(</span><span class="token string">'hsl(50 100% 100% / 100)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><a id="getMode" href="#getMode">#</a> <strong>getMode</strong>(<em>mode</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/modes.js">src/modes.js</a></p>
<p>Returns the definition object for the <em>mode</em> color space.</p>
<h3 id='color-mode-def'>
  <a href='#color-mode-def'>#</a>
  Color mode definition
</h3>
<p>The properties a definition needs are the following:</p>
<h4><code>mode</code> (<em>string</em>)</h4>
<p>The string identifier for the color space.</p>
<h4><code>channels</code> (<em>array</em>)</h4>
<p>A list of channels for the color space.</p>
<h4><code>toMode</code> (<em>object</em>)</h4>
<p>A set of functions to convert from the color space we're defining to other color spaces. At least <code>rgb</code> needs to be included; in case a specific conversion pair between two color spaces is missing, RGB is used as the &quot;buffer&quot; for the conversion.</p>
<h4><code>fromMode</code> (<em>object</em>)</h4>
<p>The opposite of <code>toMode</code>. A set of function to convert from various color spaces to the color space we're defining. At least <code>rgb</code> needs to be included.</p>
<h4><code>ranges</code> (<em>object</em>, optional)</h4>
<p>The reference ranges for values in specific channels; if left unspecified, defaults to <code>[0, 1]</code>.</p>
<h4><code>parse</code> (<em>array</em>, optional)</h4>
<p>Any parsers for the color space that can transform strings into colors. These can be either functions, or strings — the latter is used as the color space's identifier to parse the <code>color(&lt;ident&gt;)</code> CSS syntax.</p>
<h4><code>serialize</code> (<em>function</em> or <em>string</em>, optional)</h4>
<p>Defines how to serialize the color space to a CSS string with <a href="#formatCss"><code>formatCss()</code></a>.</p>
<p>If you pass in a function, it receives a color object as its only argument, and should return a string that can be used in CSS. If you pass in a string, it's used as a color profile identifier, and the color is serialized using the <code>color()</code> CSS syntax. When omitted altogether, the default color profile identifier is <code>--${mode}</code>.</p>
<h4><code>interpolate</code></h4>
<p>The default interpolations for the color space, one for each channel. Each interpolation is defined by its interpolator (the <code>use</code> key) and its fixup function (the <code>fixup</code> key). When defined as a function, a channel interpolation is meant to define its interpolator, with the fixup being a no-op.</p>
<h4><code>difference</code></h4>
<p>The default Euclidean distance method for each channel in the color space; mostly used for the <code>h</code> channel in cylindrical color spaces.</p>
<h4><code>average</code></h4>
<p>The default average function for each channel in the color space; when left unspecified, defaults to <a href="#averageNumber"><code>averageNumber</code></a>.</p>
<p>All built-in color spaces follow these conventions in regards to the <code>channels</code> array follows:</p>
<ul>
<li>there are four channels in the color space;</li>
<li>the fourth channel is always <code>alpha</code>.</li>
</ul>
<p>This makes sure <a href="#differenceEuclidean"><code>differenceEuclidean()</code></a> works as expected, but there may be more hidden assumptions in the codebase.</p>
<p>Here's a sample definition for the HSL color space:</p>
<pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'hsl'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fromMode</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rgb</span><span class="token operator">:</span> convertRgbToHsl
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">toMode</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rgb</span><span class="token operator">:</span> convertHslToRgb
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">channels</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">,</span> <span class="token string">'l'</span><span class="token punctuation">,</span> <span class="token string">'alpha'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ranges</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parse</span><span class="token operator">:</span> <span class="token punctuation">[</span>parseHsl<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">serialize</span><span class="token operator">:</span> serializeHsl<span class="token punctuation">,</span>
  <span class="token literal-property property">interpolate</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> interpolatorLinear<span class="token punctuation">,</span>
      <span class="token literal-property property">fixup</span><span class="token operator">:</span> fixupHueShorter
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">s</span><span class="token operator">:</span> interpolatorLinear<span class="token punctuation">,</span>
    <span class="token literal-property property">l</span><span class="token operator">:</span> interpolatorLinear<span class="token punctuation">,</span>
    <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> interpolatorLinear<span class="token punctuation">,</span>
      <span class="token literal-property property">fixup</span><span class="token operator">:</span> fixupAlpha
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">difference</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">h</span><span class="token operator">:</span> differenceHueSaturation
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">average</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">h</span><span class="token operator">:</span> averageAngle
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><a id="useParser" href="#useParser">#</a> <strong>useParser</strong>(<em>parser</em>, <em>mode</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/modes.js">src/modes.js</a></p>
<p>Register a new parser. The parser can be:</p>
<ul>
<li>a function, in which case the <em>mode</em> argument is not necessary.</li>
<li>a string representing the identifier to match in the <code>color()</code> syntax, in which case the <em>mode</em> argument is required.</li>
</ul>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useParser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token comment">// Register custom parser</span>
<span class="token function">useParser</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// parse the string</span>
  <span class="token keyword">return</span> color<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Register `color(--oklab)` syntax</span>
<span class="token function">useParser</span><span class="token punctuation">(</span><span class="token string">'--oklab'</span><span class="token punctuation">,</span> <span class="token string">'oklab'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><a id="removeParser" href="#removeParser">#</a> <strong>removeParser</strong>(<em>parser</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/modes.js">src/modes.js</a></p>
<p>Remove a previously registered parser function or string, including parsers registered by default.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> parse<span class="token punctuation">,</span> parseNamed<span class="token punctuation">,</span> removeParser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'tomato'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ Object { mode: "rgb", r: 1, g: 0.38823529411764707, b: 0.2784313725490196 }</span>

<span class="token function">removeParser</span><span class="token punctuation">(</span>parseNamed<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'tomato'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ⇒ undefined</span></code></pre>
<h2 id='low-level-api'>
  <a href='#low-level-api'>#</a>
  Low-level API
</h2>
<h3 id='parsing-functions'>
  <a id="parsing-functions" href="#parsing-functions">#</a>
  Parsing functions
</h3>
<p><a id="parseHex" href="#parseHex">#</a> <strong>parseHex</strong>(<em>string</em>) → <em>color</em></p>
<p>Parses hex strings of 3, 4, 6, or 8 characters, with or without the <code>#</code> prefix, and returns <code>rgb</code> color objects.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> parseHex <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'culori'</span><span class="token punctuation">;</span>

<span class="token function">parseHex</span><span class="token punctuation">(</span><span class="token string">'#abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">parseHex</span><span class="token punctuation">(</span><span class="token string">'#abcd'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">parseHex</span><span class="token punctuation">(</span><span class="token string">'#abcdef'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">parseHex</span><span class="token punctuation">(</span><span class="token string">'#abcdef12'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><a id="parseHsl" href="#parseHsl">#</a> <strong>parseHsl</strong>(<em>string</em>) → <em>color</em></p>
<p>Parses <code>hsl(…)</code> strings in the modern format and returns <code>hsl</code> color objects.</p>
<p><a id="parseHslLegacy" href="#parseHslLegacy">#</a> <strong>parseHslLegacy</strong>(<em>string</em>) → <em>color</em></p>
<p>Parses <code>hsl(…)</code> / <code>hsla(…)</code> strings in the legacy (comma-separated) format and returns <code>hsl</code> color objects.</p>
<p><a id="parseHwb" href="#parseHwb">#</a> <strong>parseHwb</strong>(<em>string</em>) → <em>color</em></p>
<p>Parses <code>hwb(…)</code> strings and returns <code>hwb</code> color objects.</p>
<p><a id="parseLab" href="#parseLab">#</a> <strong>parseLab</strong>(<em>string</em>) → <em>color</em></p>
<p>Parses <code>lab(…)</code> strings and returns <code>lab</code> color objects.</p>
<p><a id="parseLch" href="#parseLch">#</a> <strong>parseLch</strong>(<em>string</em>) → <em>color</em></p>
<p>Parses <code>lch(…)</code> strings and returns <code>lch</code> color objects.</p>
<p><a id="parseNamed" href="#parseNamed">#</a> <strong>parseNamed</strong>(<em>string</em>) → <em>color</em></p>
<p>Parses named CSS colors (eg. <code>tomato</code>) and returns <code>rgb</code> color objects.</p>
<p><a id="parseOklab" href="#parseOklab">#</a> <strong>parseOklab</strong>(<em>string</em>) → <em>color</em></p>
<p>Parses <code>oklab(…)</code> strings and returns <code>oklab</code> color objects.</p>
<p><a id="parseOklch" href="#parseOklch">#</a> <strong>parseOklch</strong>(<em>string</em>) → <em>color</em></p>
<p>Parses <code>oklch(…)</code> strings and returns <code>oklch</code> color objects.</p>
<p><a id="parseRgb" href="#parseRgb">#</a> <strong>parseRgb</strong>(<em>color</em>) → <em>color</em></p>
<p>Parses <code>rgb(…)</code> strings in the modern syntax and returns <code>rgb</code> color objects.</p>
<p><a id="parseRgbLegacy" href="#parseRgbLegacy">#</a> <strong>parseRgbLegacy</strong>(<em>color</em>) → <em>color</em></p>
<p>Parses <code>rgb(…)</code> / <code>rgba(…)</code> strings in the legacy (comma-separated) syntax and returns <code>rgb</code> color objects.</p>
<p><a id="parseTransparent" href="#parseTransparent">#</a><strong>parseTransparent</strong>(<em>string</em>) → <em>color</em></p>
<p>Parses the <code>transparent</code> string and returns a transparent black <code>rgb</code> color object.</p>
<h3>Serialization functions</h3>
<p><a id="serializeHex" href="#serializeHex">#</a><strong>serializeHex</strong>(<em>color</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/formatter.js">src/formatter.js</a></p>
<p>Serialize a <code>rgb</code> <em>color</em> to a 6-character hex code. See <a href="#formatHex"><code>formatHex()</code></a> for details.</p>
<p><a id="serializeHex8" href="#serializeHex8">#</a><strong>serializeHex8</strong>(<em>color</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/formatter.js">src/formatter.js</a></p>
<p>Serialize a <code>rgb</code> <em>color</em> to a 8-character hex code. See <a href="#formatHex8"><code>formatHex8()</code></a> for details.</p>
<p><a id="serializeHsl" href="#serializeHsl">#</a><strong>serializeHsl</strong>(<em>color</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/formatter.js">src/formatter.js</a></p>
<p>Serialize a <code>hsl</code> <em>color</em> to a <code>hsl(…)</code> string. See <a href="#formatHsl"><code>formatHsl()</code></a> for details.</p>
<p><a id="serializeRgb" href="#serializeRgb">#</a><strong>serializeRgb</strong>(<em>color</em>)</p>
<p><span aria-label='Source:'>☞</span> <a href="https://github.com/evercoder/culori/blob/main/src/formatter.js">src/formatter.js</a></p>
<p>Serialize a <code>rgb</code> <em>color</em> to a <code>rgb(…)</code> string. See <a href="#formatRgb"><code>formatRgb()</code></a> for details.</p>
<h3>Conversion functions</h3>
<table>
<thead>
<tr>
<th>Function</th>
<th>Conversion</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>convertA98ToXyz65</strong>(<em>color</em>) → <em>color</em></td>
<td><code>a98</code> → <code>xyz65</code></td>
</tr>
<tr>
<td><strong>convertCubehelixToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>cubehelix</code> → <code>rgb</code></td>
</tr>
<tr>
<td><strong>convertDlchToLab65</strong>(<em>color</em>) → <em>color</em></td>
<td><code>dlch</code> → <code>lab65</code></td>
</tr>
<tr>
<td><strong>convertHsiToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>hsi</code> → <code>rgb</code></td>
</tr>
<tr>
<td><strong>convertHslToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>hsl</code> → <code>rgb</code></td>
</tr>
<tr>
<td><strong>convertHsvToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>hsv</code> → <code>rgb</code></td>
</tr>
<tr>
<td><strong>convertHwbToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>hwb</code> → <code>rgb</code></td>
</tr>
<tr>
<td><strong>convertJabToJch</strong>(<em>color</em>) → <em>color</em></td>
<td><code>jab</code> → <code>jch</code></td>
</tr>
<tr>
<td><strong>convertJabToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>jab</code> → <code>rgb</code></td>
</tr>
<tr>
<td><strong>convertJabToXyz65</strong>(<em>color</em>) → <em>color</em></td>
<td><code>jab</code> → <code>xyz65</code></td>
</tr>
<tr>
<td><strong>convertJchToJab</strong>(<em>color</em>) → <em>color</em></td>
<td><code>jch</code> → <code>jab</code></td>
</tr>
<tr>
<td><strong>convertLab65ToDlch</strong>(<em>color</em>) → <em>color</em></td>
<td><code>lab65</code> → <code>dlch</code></td>
</tr>
<tr>
<td><strong>convertLab65ToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>lab65</code> → <code>rgb</code></td>
</tr>
<tr>
<td><strong>convertLab65ToXyz65</strong>(<em>color</em>) → <em>color</em></td>
<td><code>lab65</code> → <code>xyz65</code></td>
</tr>
<tr>
<td><strong>convertLabToLch</strong>(<em>color</em>) → <em>color</em></td>
<td><code>lab</code> → <code>lch</code></td>
</tr>
<tr>
<td><strong>convertLabToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>lab</code> → <code>rgb</code></td>
</tr>
<tr>
<td><strong>convertLabToXyz50</strong>(<em>color</em>) → <em>color</em></td>
<td><code>lab</code> → <code>xyz50</code></td>
</tr>
<tr>
<td><strong>convertLchToLab</strong>(<em>color</em>) → <em>color</em></td>
<td><code>lch</code> → <code>lab</code></td>
</tr>
<tr>
<td><strong>convertLchuvToLuv</strong>(<em>color</em>) → <em>color</em></td>
<td><code>lchuv</code> → <code>luv</code></td>
</tr>
<tr>
<td><strong>convertLrgbToOklab</strong>(<em>color</em>) → <em>color</em></td>
<td><code>lrgb</code> → <code>oklab</code></td>
</tr>
<tr>
<td><strong>convertLrgbToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>lrgb</code> → <code>rgb</code></td>
</tr>
<tr>
<td><strong>convertLuvToLchuv</strong>(<em>color</em>) → <em>color</em></td>
<td><code>luv</code> → <code>lchuv</code></td>
</tr>
<tr>
<td><strong>convertLuvToXyz50</strong>(<em>color</em>) → <em>color</em></td>
<td><code>luv</code> → <code>xyz50</code></td>
</tr>
<tr>
<td><strong>convertOkhslToOklab</strong>(<em>color</em>) → <em>color</em></td>
<td><code>okhsl</code> → <code>oklab</code></td>
</tr>
<tr>
<td><strong>convertOkhsvToOklab</strong>(<em>color</em>) → <em>color</em></td>
<td><code>okhsv</code> → <code>oklab</code></td>
</tr>
<tr>
<td><strong>convertOklabToLrgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>oklab</code> → <code>lrgb</code></td>
</tr>
<tr>
<td><strong>convertOklabToOkhsl</strong>(<em>color</em>) → <em>color</em></td>
<td><code>oklab</code> → <code>okhsl</code></td>
</tr>
<tr>
<td><strong>convertOklabToOkhsv</strong>(<em>color</em>) → <em>color</em></td>
<td><code>oklab</code> → <code>okhsv</code></td>
</tr>
<tr>
<td><strong>convertOklabToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>oklab</code> → <code>rgb</code></td>
</tr>
<tr>
<td><strong>convertP3ToXyz65</strong>(<em>color</em>) → <em>color</em></td>
<td><code>p3</code> → <code>xyz65</code></td>
</tr>
<tr>
<td><strong>convertProphotoToXyz50</strong>(<em>color</em>) → <em>color</em></td>
<td><code>prophoto</code> → <code>xyz50</code></td>
</tr>
<tr>
<td><strong>convertRec2020ToXyz65</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rec2020</code> → <code>xyz65</code></td>
</tr>
<tr>
<td><strong>convertRgbToCubehelix</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>cubehelix</code></td>
</tr>
<tr>
<td><strong>convertRgbToHsi</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>hsi</code></td>
</tr>
<tr>
<td><strong>convertRgbToHsl</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>hsl</code></td>
</tr>
<tr>
<td><strong>convertRgbToHsv</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>hsv</code></td>
</tr>
<tr>
<td><strong>convertRgbToHwb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>hwb</code></td>
</tr>
<tr>
<td><strong>convertRgbToJab</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>jab</code></td>
</tr>
<tr>
<td><strong>convertRgbToLab65</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>lab65</code></td>
</tr>
<tr>
<td><strong>convertRgbToLab</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>lab</code></td>
</tr>
<tr>
<td><strong>convertRgbToLrgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>lrgb</code></td>
</tr>
<tr>
<td><strong>convertRgbToOklab</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>oklab</code></td>
</tr>
<tr>
<td><strong>convertRgbToXyb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>xyb</code></td>
</tr>
<tr>
<td><strong>convertRgbToXyz50</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>xyz50</code></td>
</tr>
<tr>
<td><strong>convertRgbToXyz65</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>xyz65</code></td>
</tr>
<tr>
<td><strong>convertRgbToYiq</strong>(<em>color</em>) → <em>color</em></td>
<td><code>rgb</code> → <code>yiq</code></td>
</tr>
<tr>
<td><strong>convertXybToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>xyb</code> → <code>rgb</code></td>
</tr>
<tr>
<td><strong>convertXyz50ToLab</strong>(<em>color</em>) → <em>color</em></td>
<td><code>xyz50</code> → <code>lab</code></td>
</tr>
<tr>
<td><strong>convertXyz50ToLuv</strong>(<em>color</em>) → <em>color</em></td>
<td><code>xyz50</code> → <code>luv</code></td>
</tr>
<tr>
<td><strong>convertXyz50ToProphoto</strong>(<em>color</em>) → <em>color</em></td>
<td><code>xyz50</code> → <code>prophoto</code></td>
</tr>
<tr>
<td><strong>convertXyz50ToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>xyz50</code> → <code>rgb</code></td>
</tr>
<tr>
<td><strong>convertXyz50ToXyz65</strong>(<em>color</em>) → <em>color</em></td>
<td><code>xyz50</code> → <code>xyz65</code></td>
</tr>
<tr>
<td><strong>convertXyz65ToA98</strong>(<em>color</em>) → <em>color</em></td>
<td><code>xyz65</code> → <code>a98</code></td>
</tr>
<tr>
<td><strong>convertXyz65ToJab</strong>(<em>color</em>) → <em>color</em></td>
<td><code>xyz65</code> → <code>jab</code></td>
</tr>
<tr>
<td><strong>convertXyz65ToLab65</strong>(<em>color</em>) → <em>color</em></td>
<td><code>xyz65</code> → <code>lab65</code></td>
</tr>
<tr>
<td><strong>convertXyz65ToP3</strong>(<em>color</em>) → <em>color</em></td>
<td><code>xyz65</code> → <code>p3</code></td>
</tr>
<tr>
<td><strong>convertXyz65ToRec2020</strong>(<em>color</em>) → <em>color</em></td>
<td><code>xyz65</code> → <code>rec2020</code></td>
</tr>
<tr>
<td><strong>convertXyz65ToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>xyz65</code> → <code>rgb</code></td>
</tr>
<tr>
<td><strong>convertXyz65ToXyz50</strong>(<em>color</em>) → <em>color</em></td>
<td><code>xyz65</code> → <code>xyz50</code></td>
</tr>
<tr>
<td><strong>convertYiqToRgb</strong>(<em>color</em>) → <em>color</em></td>
<td><code>yiq</code> → <code>rgb</code></td>
</tr>
</tbody>
</table>

			</article>
		</div>
		<footer>
			<div class="container">

				<p>
					Culori is built by <a href="https://moqups.com">Moqups</a> &middot; <a href="/colophon/">Colophon</a> &middot; <a href="/resources/">Resources</a> 
				<p>

				<p>
					Can this page be improved?
					<a
						href="https://github.com/Evercoder/culori/blob/main/./docs/api.md"
						>Edit it on GitHub</a
					>
				</p>
			</div>
		</footer>


		<script type="module">
			import * as culori from '/culori.min.mjs';

			/* Expose as global variable */
			window.culori = culori;

			const { p3, random, formatCss, formatHex } = culori;

			const r = () => random('lch', { l: [30, 80], c: [60, 90] });
			let r1 = r();
			let r2 = r();
			if (CSS.supports('color: color(display-p3 0 0 0)')) {
				r1 = formatCss(p3(r1));
				r2 = formatCss(p3(r2));
			} else {
				r1 = formatHex(r1);
				r2 = formatHex(r2);
			}
			document.body.style.setProperty('--random-1', r1);
			document.body.style.setProperty('--random-2', r2);
		</script>
	</body>
</html>
