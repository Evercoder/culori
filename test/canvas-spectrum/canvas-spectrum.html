<!DOCTYPE html>
<html>
<head>
	<title>Canvas spectrum test</title>
	<meta charset="utf-8">
	<script type="text/javascript" src='../../build/culori.js'></script>
</head>
<body>

	<script type="text/javascript">

		function draw(callback) {
			var canvas = document.createElement('canvas');
			canvas.width = 101;
			canvas.height = 101;
			var ctx = canvas.getContext('2d');

			var canvasData = ctx.getImageData(0, 0, canvas.width, canvas.height);

			function drawPixel (x, y, r, g, b) {
			    var index = (x + y * canvas.width) * 4;

			    canvasData.data[index + 0] = r;
			    canvasData.data[index + 1] = g;
			    canvasData.data[index + 2] = b;
			    canvasData.data[index + 3] = 255;
			}

			callback(drawPixel);

			ctx.putImageData(canvasData, 0, 0);

			return canvas;
		}

		let hsl_canvas = draw(function(drawPixel) {
			for (var sat = 100; sat >= 0; sat--) {
				for (var light = 100; light >=0; light--) {
					let rgb = culori.convert.from_hsl(0, sat/100, light/100).map(v => Math.round(v * 255));
					drawPixel(100 - sat, 100 - light, rgb[0], rgb[1], rgb[2]);
				}
			}
		});

		let hsv_canvas = draw(function(drawPixel) {
			for (var sat = 100; sat >= 0; sat--) {
				for (var val = 100; val >=0; val--) {
					let rgb = culori.convert.from_hsv(120, sat/100, val/100).map(v => Math.round(v * 255));
					drawPixel(100 - sat, 100 - val, rgb[0], rgb[1], rgb[2]);
				}
			}
		});

		document.body.appendChild(hsl_canvas);
		document.body.appendChild(hsv_canvas);

	</script>

</body>
</html>